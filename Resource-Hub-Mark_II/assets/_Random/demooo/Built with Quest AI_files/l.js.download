/*
 * anime.js v3.1.0
 * (c) 2019 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */

!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var n={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},r=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],t={CSS:{},springs:{}};function a(n,e,r){return Math.min(Math.max(n,e),r)}function o(n,e){return n.indexOf(e)>-1}function u(n,e){return n.apply(null,e)}var i={arr:function(n){return Array.isArray(n)},obj:function(n){return o(Object.prototype.toString.call(n),"Object")},pth:function(n){return i.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||i.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return i.hex(n)||i.rgb(n)||i.hsl(n)},key:function(r){return!n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&"targets"!==r&&"keyframes"!==r}};function c(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function s(n,e){var r=c(n),o=a(i.und(r[0])?1:r[0],.1,100),u=a(i.und(r[1])?100:r[1],.1,100),s=a(i.und(r[2])?10:r[2],.1,100),f=a(i.und(r[3])?0:r[3],.1,100),l=Math.sqrt(u/o),d=s/(2*Math.sqrt(u*o)),p=d<1?l*Math.sqrt(1-d*d):0,h=1,v=d<1?(d*l-f)/p:-f+l;function g(n){var r=e?e*n/1e3:n;return r=d<1?Math.exp(-r*d*l)*(h*Math.cos(p*r)+v*Math.sin(p*r)):(h+v*r)*Math.exp(-r*l),0===n||1===n?n:1-r}return e?g:function(){var e=t.springs[n];if(e)return e;for(var r=0,a=0;;)if(1===g(r+=1/6)){if(++a>=16)break}else a=0;var o=r*(1/6)*1e3;return t.springs[n]=o,o}}function f(n){return void 0===n&&(n=10),function(e){return Math.round(e*n)*(1/n)}}var l,d,p=function(){var n=11,e=1/(n-1);function r(n,e){return 1-3*e+3*n}function t(n,e){return 3*e-6*n}function a(n){return 3*n}function o(n,e,o){return((r(e,o)*n+t(e,o))*n+a(e))*n}function u(n,e,o){return 3*r(e,o)*n*n+2*t(e,o)*n+a(e)}return function(r,t,a,i){if(0<=r&&r<=1&&0<=a&&a<=1){var c=new Float32Array(n);if(r!==t||a!==i)for(var s=0;s<n;++s)c[s]=o(s*e,r,a);return function(n){return r===t&&a===i?n:0===n||1===n?n:o(f(n),t,i)}}function f(t){for(var i=0,s=1,f=n-1;s!==f&&c[s]<=t;++s)i+=e;var l=i+(t-c[--s])/(c[s+1]-c[s])*e,d=u(l,r,a);return d>=.001?function(n,e,r,t){for(var a=0;a<4;++a){var i=u(e,r,t);if(0===i)return e;e-=(o(e,r,t)-n)/i}return e}(t,l,r,a):0===d?l:function(n,e,r,t,a){for(var u,i,c=0;(u=o(i=e+(r-e)/2,t,a)-n)>0?r=i:e=i,Math.abs(u)>1e-7&&++c<10;);return i}(t,i,i+e,r,a)}}}(),h=(l={linear:function(){return function(n){return n}}},d={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,r=4;n<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===n&&(n=1),void 0===e&&(e=.5);var r=a(n,1,10),t=a(e,.1,2);return function(n){return 0===n||1===n?n:-r*Math.pow(2,10*(n-1))*Math.sin((n-1-t/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/t)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){d[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(d).forEach(function(n){var e=d[n];l["easeIn"+n]=e,l["easeOut"+n]=function(n,r){return function(t){return 1-e(n,r)(1-t)}},l["easeInOut"+n]=function(n,r){return function(t){return t<.5?e(n,r)(2*t)/2:1-e(n,r)(-2*t+2)/2}}}),l);function v(n,e){if(i.fnc(n))return n;var r=n.split("(")[0],t=h[r],a=c(n);switch(r){case"spring":return s(n,e);case"cubicBezier":return u(p,a);case"steps":return u(f,a);default:return u(t,a)}}function g(n){try{return document.querySelectorAll(n)}catch(n){return}}function m(n,e){for(var r=n.length,t=arguments.length>=2?arguments[1]:void 0,a=[],o=0;o<r;o++)if(o in n){var u=n[o];e.call(t,u,o,n)&&a.push(u)}return a}function y(n){return n.reduce(function(n,e){return n.concat(i.arr(e)?y(e):e)},[])}function b(n){return i.arr(n)?n:(i.str(n)&&(n=g(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function M(n,e){return n.some(function(n){return n===e})}function x(n){var e={};for(var r in n)e[r]=n[r];return e}function w(n,e){var r=x(n);for(var t in n)r[t]=e.hasOwnProperty(t)?e[t]:n[t];return r}function k(n,e){var r=x(n);for(var t in e)r[t]=i.und(n[t])?e[t]:n[t];return r}function O(n){return i.rgb(n)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=n))?"rgba("+r[1]+",1)":e:i.hex(n)?(t=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,r,t){return e+e+r+r+t+t}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+",1)"):i.hsl(n)?function(n){var e,r,t,a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),o=parseInt(a[1],10)/360,u=parseInt(a[2],10)/100,i=parseInt(a[3],10)/100,c=a[4]||1;function s(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+6*(e-n)*r:r<.5?e:r<2/3?n+(e-n)*(2/3-r)*6:n}if(0==u)e=r=t=i;else{var f=i<.5?i*(1+u):i+u-i*u,l=2*i-f;e=s(l,f,o+1/3),r=s(l,f,o),t=s(l,f,o-1/3)}return"rgba("+255*e+","+255*r+","+255*t+","+c+")"}(n):void 0;var e,r,t,a}function C(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function B(n,e){return i.fnc(n)?n(e.target,e.id,e.total):n}function P(n,e){return n.getAttribute(e)}function I(n,e,r){if(M([r,"deg","rad","turn"],C(e)))return e;var a=t.CSS[e+r];if(!i.und(a))return a;var o=document.createElement(n.tagName),u=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=100+r;var c=100/o.offsetWidth;u.removeChild(o);var s=c*parseFloat(e);return t.CSS[e+r]=s,s}function T(n,e,r){if(e in n.style){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=n.style[e]||getComputedStyle(n).getPropertyValue(t)||"0";return r?I(n,a,r):a}}function D(n,e){return i.dom(n)&&!i.inp(n)&&(P(n,e)||i.svg(n)&&n[e])?"attribute":i.dom(n)&&M(r,e)?"transform":i.dom(n)&&"transform"!==e&&T(n,e)?"css":null!=n[e]?"object":void 0}function E(n){if(i.dom(n)){for(var e,r=n.style.transform||"",t=/(\w+)\(([^)]*)\)/g,a=new Map;e=t.exec(r);)a.set(e[1],e[2]);return a}}function F(n,e,r,t){var a,u=o(e,"scale")?1:0+(o(a=e,"translate")||"perspective"===a?"px":o(a,"rotate")||o(a,"skew")?"deg":void 0),i=E(n).get(e)||u;return r&&(r.transforms.list.set(e,i),r.transforms.last=e),t?I(n,i,t):i}function N(n,e,r,t){switch(D(n,e)){case"transform":return F(n,e,t,r);case"css":return T(n,e,r);case"attribute":return P(n,e);default:return n[e]||0}}function A(n,e){var r=/^(\*=|\+=|-=)/.exec(n);if(!r)return n;var t=C(n)||0,a=parseFloat(e),o=parseFloat(n.replace(r[0],""));switch(r[0][0]){case"+":return a+o+t;case"-":return a-o+t;case"*":return a*o+t}}function L(n,e){if(i.col(n))return O(n);if(/\s/g.test(n))return n;var r=C(n),t=r?n.substr(0,n.length-r.length):n;return e?t+e:t}function j(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function S(n){for(var e,r=n.points,t=0,a=0;a<r.numberOfItems;a++){var o=r.getItem(a);a>0&&(t+=j(e,o)),e=o}return t}function q(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return o=n,2*Math.PI*P(o,"r");case"rect":return 2*P(a=n,"width")+2*P(a,"height");case"line":return j({x:P(t=n,"x1"),y:P(t,"y1")},{x:P(t,"x2"),y:P(t,"y2")});case"polyline":return S(n);case"polygon":return r=(e=n).points,S(e)+j(r.getItem(r.numberOfItems-1),r.getItem(0))}var e,r,t,a,o}function $(n,e){var r=e||{},t=r.el||function(n){for(var e=n.parentNode;i.svg(e)&&i.svg(e.parentNode);)e=e.parentNode;return e}(n),a=t.getBoundingClientRect(),o=P(t,"viewBox"),u=a.width,c=a.height,s=r.viewBox||(o?o.split(" "):[0,0,u,c]);return{el:t,viewBox:s,x:s[0]/1,y:s[1]/1,w:u/s[2],h:c/s[3]}}function X(n,e){function r(r){void 0===r&&(r=0);var t=e+r>=1?e+r:0;return n.el.getPointAtLength(t)}var t=$(n.el,n.svg),a=r(),o=r(-1),u=r(1);switch(n.property){case"x":return(a.x-t.x)*t.w;case"y":return(a.y-t.y)*t.h;case"angle":return 180*Math.atan2(u.y-o.y,u.x-o.x)/Math.PI}}function Y(n,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,t=L(i.pth(n)?n.totalLength:n,e)+"";return{original:t,numbers:t.match(r)?t.match(r).map(Number):[0],strings:i.str(n)||e?t.split(r):[]}}function Z(n){return m(n?y(i.arr(n)?n.map(b):b(n)):[],function(n,e,r){return r.indexOf(n)===e})}function Q(n){var e=Z(n);return e.map(function(n,r){return{target:n,id:r,total:e.length,transforms:{list:E(n)}}})}function V(n,e){var r=x(e);if(/^spring/.test(r.easing)&&(r.duration=s(r.easing)),i.arr(n)){var t=n.length;2===t&&!i.obj(n[0])?n={value:n}:i.fnc(e.duration)||(r.duration=e.duration/t)}var a=i.arr(n)?n:[n];return a.map(function(n,r){var t=i.obj(n)&&!i.pth(n)?n:{value:n};return i.und(t.delay)&&(t.delay=r?0:e.delay),i.und(t.endDelay)&&(t.endDelay=r===a.length-1?e.endDelay:0),t}).map(function(n){return k(n,r)})}function z(n,e){var r=[],t=e.keyframes;for(var a in t&&(e=k(function(n){for(var e=m(y(n.map(function(n){return Object.keys(n)})),function(n){return i.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),r={},t=function(t){var a=e[t];r[a]=n.map(function(n){var e={};for(var r in n)i.key(r)?r==a&&(e.value=n[r]):e[r]=n[r];return e})},a=0;a<e.length;a++)t(a);return r}(t),e)),e)i.key(a)&&r.push({name:a,tweens:V(e[a],n)});return r}function H(n,e){var r;return n.tweens.map(function(t){var a=function(n,e){var r={};for(var t in n){var a=B(n[t],e);i.arr(a)&&1===(a=a.map(function(n){return B(n,e)})).length&&(a=a[0]),r[t]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(t,e),o=a.value,u=i.arr(o)?o[1]:o,c=C(u),s=N(e.target,n.name,c,e),f=r?r.to.original:s,l=i.arr(o)?o[0]:f,d=C(l)||C(s),p=c||d;return i.und(u)&&(u=f),a.from=Y(l,p),a.to=Y(A(u,l),p),a.start=r?r.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=v(a.easing,a.duration),a.isPath=i.pth(o),a.isColor=i.col(a.from.original),a.isColor&&(a.round=1),r=a,a})}var G={css:function(n,e,r){return n.style[e]=r},attribute:function(n,e,r){return n.setAttribute(e,r)},object:function(n,e,r){return n[e]=r},transform:function(n,e,r,t,a){if(t.list.set(e,r),e===t.last||a){var o="";t.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o}}};function R(n,e){Q(n).forEach(function(n){for(var r in e){var t=B(e[r],n),a=n.target,o=C(t),u=N(a,r,o,n),i=A(L(t,o||C(u)),u),c=D(a,r);G[c](a,r,i,n.transforms,!0)}})}function W(n,e){return m(y(n.map(function(n){return e.map(function(e){return function(n,e){var r=D(n.target,e.name);if(r){var t=H(e,n),a=t[t.length-1];return{type:r,property:e.name,animatable:n,tweens:t,duration:a.end,delay:t[0].delay,endDelay:a.endDelay}}}(n,e)})})),function(n){return!i.und(n)})}function J(n,e){var r=n.length,t=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=r?Math.max.apply(Math,n.map(function(n){return t(n)+n.duration})):e.duration,a.delay=r?Math.min.apply(Math,n.map(function(n){return t(n)+n.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,n.map(function(n){return t(n)+n.duration-n.endDelay})):e.endDelay,a}var K=0;var U,_=[],nn=[],en=function(){function n(){U=requestAnimationFrame(e)}function e(e){var r=_.length;if(r){for(var t=0;t<r;){var a=_[t];if(a.paused){var o=_.indexOf(a);o>-1&&(_.splice(o,1),r=_.length)}else a.tick(e);t++}n()}else U=cancelAnimationFrame(U)}return n}();function rn(r){void 0===r&&(r={});var t,o=0,u=0,i=0,c=0,s=null;function f(n){var e=window.Promise&&new Promise(function(n){return s=n});return n.finished=e,e}var l,d,p,h,v,g,y,b,M=(d=w(n,l=r),p=w(e,l),h=z(p,l),v=Q(l.targets),g=W(v,h),y=J(g,p),b=K,K++,k(d,{id:b,children:[],animatables:v,animations:g,duration:y.duration,delay:y.delay,endDelay:y.endDelay}));f(M);function x(){var n=M.direction;"alternate"!==n&&(M.direction="normal"!==n?"normal":"reverse"),M.reversed=!M.reversed,t.forEach(function(n){return n.reversed=M.reversed})}function O(n){return M.reversed?M.duration-n:n}function C(){o=0,u=O(M.currentTime)*(1/rn.speed)}function B(n,e){e&&e.seek(n-e.timelineOffset)}function P(n){for(var e=0,r=M.animations,t=r.length;e<t;){var o=r[e],u=o.animatable,i=o.tweens,c=i.length-1,s=i[c];c&&(s=m(i,function(e){return n<e.end})[0]||s);for(var f=a(n-s.start-s.delay,0,s.duration)/s.duration,l=isNaN(f)?1:s.easing(f),d=s.to.strings,p=s.round,h=[],v=s.to.numbers.length,g=void 0,y=0;y<v;y++){var b=void 0,x=s.to.numbers[y],w=s.from.numbers[y]||0;b=s.isPath?X(s.value,l*x):w+l*(x-w),p&&(s.isColor&&y>2||(b=Math.round(b*p)/p)),h.push(b)}var k=d.length;if(k){g=d[0];for(var O=0;O<k;O++){d[O];var C=d[O+1],B=h[O];isNaN(B)||(g+=C?B+C:B+" ")}}else g=h[0];G[o.type](u.target,o.property,g,u.transforms),o.currentValue=g,e++}}function I(n){M[n]&&!M.passThrough&&M[n](M)}function T(n){var e=M.duration,r=M.delay,l=e-M.endDelay,d=O(n);M.progress=a(d/e*100,0,100),M.reversePlayback=d<M.currentTime,t&&function(n){if(M.reversePlayback)for(var e=c;e--;)B(n,t[e]);else for(var r=0;r<c;r++)B(n,t[r])}(d),!M.began&&M.currentTime>0&&(M.began=!0,I("begin")),!M.loopBegan&&M.currentTime>0&&(M.loopBegan=!0,I("loopBegin")),d<=r&&0!==M.currentTime&&P(0),(d>=l&&M.currentTime!==e||!e)&&P(e),d>r&&d<l?(M.changeBegan||(M.changeBegan=!0,M.changeCompleted=!1,I("changeBegin")),I("change"),P(d)):M.changeBegan&&(M.changeCompleted=!0,M.changeBegan=!1,I("changeComplete")),M.currentTime=a(d,0,e),M.began&&I("update"),n>=e&&(u=0,M.remaining&&!0!==M.remaining&&M.remaining--,M.remaining?(o=i,I("loopComplete"),M.loopBegan=!1,"alternate"===M.direction&&x()):(M.paused=!0,M.completed||(M.completed=!0,I("loopComplete"),I("complete"),!M.passThrough&&"Promise"in window&&(s(),f(M)))))}return M.reset=function(){var n=M.direction;M.passThrough=!1,M.currentTime=0,M.progress=0,M.paused=!0,M.began=!1,M.loopBegan=!1,M.changeBegan=!1,M.completed=!1,M.changeCompleted=!1,M.reversePlayback=!1,M.reversed="reverse"===n,M.remaining=M.loop,t=M.children;for(var e=c=t.length;e--;)M.children[e].reset();(M.reversed&&!0!==M.loop||"alternate"===n&&1===M.loop)&&M.remaining++,P(M.reversed?M.duration:0)},M.set=function(n,e){return R(n,e),M},M.tick=function(n){i=n,o||(o=i),T((i+(u-o))*rn.speed)},M.seek=function(n){T(O(n))},M.pause=function(){M.paused=!0,C()},M.play=function(){M.paused&&(M.completed&&M.reset(),M.paused=!1,_.push(M),C(),U||en())},M.reverse=function(){x(),C()},M.restart=function(){M.reset(),M.play()},M.reset(),M.autoplay&&M.play(),M}function tn(n,e){for(var r=e.length;r--;)M(n,e[r].animatable.target)&&e.splice(r,1)}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(_.forEach(function(n){return n.pause()}),nn=_.slice(0),rn.running=_=[]):nn.forEach(function(n){return n.play()})}),rn.version="3.1.0",rn.speed=1,rn.running=_,rn.remove=function(n){for(var e=Z(n),r=_.length;r--;){var t=_[r],a=t.animations,o=t.children;tn(e,a);for(var u=o.length;u--;){var i=o[u],c=i.animations;tn(e,c),c.length||i.children.length||o.splice(u,1)}a.length||o.length||t.pause()}},rn.get=N,rn.set=R,rn.convertPx=I,rn.path=function(n,e){var r=i.str(n)?g(n)[0]:n,t=e||100;return function(n){return{property:n,el:r,svg:$(r),totalLength:q(r)*(t/100)}}},rn.setDashoffset=function(n){var e=q(n);return n.setAttribute("stroke-dasharray",e),e},rn.stagger=function(n,e){void 0===e&&(e={});var r=e.direction||"normal",t=e.easing?v(e.easing):null,a=e.grid,o=e.axis,u=e.from||0,c="first"===u,s="center"===u,f="last"===u,l=i.arr(n),d=l?parseFloat(n[0]):parseFloat(n),p=l?parseFloat(n[1]):0,h=C(l?n[1]:n)||0,g=e.start||0+(l?d:0),m=[],y=0;return function(n,e,i){if(c&&(u=0),s&&(u=(i-1)/2),f&&(u=i-1),!m.length){for(var v=0;v<i;v++){if(a){var b=s?(a[0]-1)/2:u%a[0],M=s?(a[1]-1)/2:Math.floor(u/a[0]),x=b-v%a[0],w=M-Math.floor(v/a[0]),k=Math.sqrt(x*x+w*w);"x"===o&&(k=-x),"y"===o&&(k=-w),m.push(k)}else m.push(Math.abs(u-v));y=Math.max.apply(Math,m)}t&&(m=m.map(function(n){return t(n/y)*y})),"reverse"===r&&(m=m.map(function(n){return o?n<0?-1*n:-n:Math.abs(y-n)}))}return g+(l?(p-d)/y:d)*(Math.round(100*m[e])/100)+h}},rn.timeline=function(n){void 0===n&&(n={});var r=rn(n);return r.duration=0,r.add=function(t,a){var o=_.indexOf(r),u=r.children;function c(n){n.passThrough=!0}o>-1&&_.splice(o,1);for(var s=0;s<u.length;s++)c(u[s]);var f=k(t,w(e,n));f.targets=f.targets||n.targets;var l=r.duration;f.autoplay=!1,f.direction=r.direction,f.timelineOffset=i.und(a)?l:A(a,l),c(r),r.seek(f.timelineOffset);var d=rn(f);c(d),u.push(d);var p=J(u,n);return r.delay=p.delay,r.endDelay=p.endDelay,r.duration=p.duration,r.seek(0),r.reset(),r.autoplay&&r.play(),r},r},rn.easing=v,rn.penner=h,rn.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},rn});
/*! howler.js v2.1.3 | (c) 2013-2019, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var o=this||n;if(e=parseFloat(e),o.ctx||_(),void 0!==e&&e>=0&&e<=1){if(o._volume=e,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.volume=u._volume*e)}return o}return o._volume},mute:function(e){var o=this||n;o.ctx||_(),o._muted=e,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e?0:o._volume,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.muted=!!e||u._muted)}return o},unload:function(){for(var e=this||n,o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var o=new Audio;void 0===o.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{var o=new Audio;o.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,o=null;try{o="undefined"!=typeof Audio?new Audio:null}catch(n){return e}if(!o||"function"!=typeof o.canPlayType)return e;var t=o.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!t&&!o.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(n){for(var t=0;t<e.html5PoolSize;t++)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0}for(var t=0;t<e._howls.length;t++)if(!e._howls[t]._webAudio)for(var a=e._howls[t]._getSoundIds(),u=0;u<a.length;u++){var i=e._howls[t]._soundById(a[u]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var o=(new Audio).play();return o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var o=this||n;return e._unlocked&&o._html5AudioPool.push(e),o},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var t=0;t<e._howls[o]._sounds.length;t++)if(!e._howls[o]._sounds[t]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e,o=function(e){var n=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");n.init(e)};o.prototype={init:function(e){var o=this;return n.ctx||_(),o._autoplay=e.autoplay||!1,o._format="string"!=typeof e.format?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload="boolean"!=typeof e.preload||e.preload,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._xhrWithCredentials=e.xhrWithCredentials||!1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onunlock=e.onunlock?[{fn:e.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o.load(),o},load:function(){var e=this,o=null;if(n.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var u,i;if(e._format&&e._format[r])u=e._format[r];else{if("string"!=typeof(i=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(i),u||(u=/\.([^.]+)$/.exec(i.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&n.codecs(u)){o=e._src[r];break}}return o?(e._src=o,e._state="loading","https:"===window.location.protocol&&"http:"===o.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new t(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var t=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===t._state&&!t._sprite[e])return null;if(void 0===e&&(e="__default",!t._playLock)){for(var a=0,u=0;u<t._sounds.length;u++)t._sounds[u]._paused&&!t._sounds[u]._ended&&(a++,r=t._sounds[u]._id);1===a?e=null:r=null}}var i=r?t._soundById(r):t._inactiveSound();if(!i)return null;if(r&&!e&&(e=i._sprite||"__default"),"loaded"!==t._state){i._sprite=e,i._ended=!1;var d=i._id;return t._queue.push({event:"play",action:function(){t.play(d)}}),d}if(r&&!i._paused)return o||t._loadQueue("play"),i._id;t._webAudio&&n._autoResume();var _=Math.max(0,i._seek>0?i._seek:t._sprite[e][0]/1e3),s=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-_),l=1e3*s/Math.abs(i._rate),c=t._sprite[e][0]/1e3,f=(t._sprite[e][0]+t._sprite[e][1])/1e3;i._sprite=e,i._ended=!1;var p=function(){i._paused=!1,i._seek=_,i._start=c,i._stop=f,i._loop=!(!i._loop&&!t._sprite[e][2])};if(_>=f)return void t._ended(i);var m=i._node;if(t._webAudio){var v=function(){t._playLock=!1,p(),t._refreshBuffer(i);var e=i._muted||t._muted?0:i._volume;m.gain.setValueAtTime(e,n.ctx.currentTime),i._playStart=n.ctx.currentTime,void 0===m.bufferSource.start?i._loop?m.bufferSource.noteGrainOn(0,_,86400):m.bufferSource.noteGrainOn(0,_,s):i._loop?m.bufferSource.start(0,_,86400):m.bufferSource.start(0,_,s),l!==1/0&&(t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l)),o||setTimeout(function(){t._emit("play",i._id),t._loadQueue()},0)};"running"===n.state?v():(t._playLock=!0,t.once("resume",v),t._clearTimer(i._id))}else{var h=function(){m.currentTime=_,m.muted=i._muted||t._muted||n._muted||m.muted,m.volume=i._volume*n.volume(),m.playbackRate=i._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(t._playLock=!0,p(),r.then(function(){t._playLock=!1,m._unlocked=!0,o||(t._emit("play",i._id),t._loadQueue())}).catch(function(){t._playLock=!1,t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),i._ended=!0,i._paused=!0})):o||(t._playLock=!1,p(),t._emit("play",i._id),t._loadQueue()),m.playbackRate=i._rate,m.paused)return void t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||i._loop?t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l):(t._endTimers[i._id]=function(){t._ended(i),m.removeEventListener("ended",t._endTimers[i._id],!1)},m.addEventListener("ended",t._endTimers[i._id],!1))}catch(e){t._emit("playerror",i._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=t._src,m.load());var y=window&&window.ejecta||!m.readyState&&n._navigator.isCocoonJS;if(m.readyState>=3||y)h();else{t._playLock=!0;var g=function(){h(),m.removeEventListener(n._canPlayEvent,g,!1)};m.addEventListener(n._canPlayEvent,g,!1),t._clearTimer(i._id)}}return i._id},pause:function(e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var o=n._getSoundIds(e),t=0;t<o.length;t++){n._clearTimer(o[t]);var r=n._soundById(o[t]);if(r&&!r._paused&&(r._seek=n.seek(o[t]),r._rateSeek=0,r._paused=!0,n._stopFade(o[t]),r._node))if(n._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||n._emit("pause",r?r._id:null)}return n},stop:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var t=o._getSoundIds(e),r=0;r<t.length;r++){o._clearTimer(t[r]);var a=o._soundById(t[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,o._stopFade(t[r]),a._node&&(o._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),o._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&o._clearSound(a._node))),n||o._emit("stop",a._id))}return o},mute:function(e,o){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,o)}}),t;if(void 0===o){if("boolean"!=typeof e)return t._muted;t._muted=e}for(var r=t._getSoundIds(o),a=0;a<r.length;a++){var u=t._soundById(r[a]);u&&(u._muted=e,u._interval&&t._stopFade(u._id),t._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,n.ctx.currentTime):u._node&&(u._node.muted=!!n._muted||e),t._emit("mute",u._id))}return t},volume:function(){var e,o,t=this,r=arguments;if(0===r.length)return t._volume;if(1===r.length||2===r.length&&void 0===r[1]){t._getSoundIds().indexOf(r[0])>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var a;if(!(void 0!==e&&e>=0&&e<=1))return a=o?t._soundById(o):t._sounds[0],a?a._volume:0;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,r)}}),t;void 0===o&&(t._volume=e),o=t._getSoundIds(o);for(var u=0;u<o.length;u++)(a=t._soundById(o[u]))&&(a._volume=e,r[2]||t._stopFade(o[u]),t._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,n.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*n.volume()),t._emit("volume",a._id));return t},fade:function(e,o,t,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,o,t,r)}}),a;e=parseFloat(e),o=parseFloat(o),t=parseFloat(t),a.volume(e,r);for(var u=a._getSoundIds(r),i=0;i<u.length;i++){var d=a._soundById(u[i]);if(d){if(r||a._stopFade(u[i]),a._webAudio&&!d._muted){var _=n.ctx.currentTime,s=_+t/1e3;d._volume=e,d._node.gain.setValueAtTime(e,_),d._node.gain.linearRampToValueAtTime(o,s)}a._startFadeInterval(d,e,o,t,u[i],void 0===r)}}return a},_startFadeInterval:function(e,n,o,t,r,a){var u=this,i=n,d=o-n,_=Math.abs(d/.01),s=Math.max(4,_>0?t/_:t),l=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var r=(Date.now()-l)/t;l=Date.now(),i+=d*r,i=Math.max(0,i),i=Math.min(1,i),i=Math.round(100*i)/100,u._webAudio?e._volume=i:u.volume(i,e._id,!0),a&&(u._volume=i),(o<n&&i<=o||o>n&&i>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,u.volume(o,e._id),u._emit("fade",e._id))},s)},_stopFade:function(e){var o=this,t=o._soundById(e);return t&&t._interval&&(o._webAudio&&t._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(t._interval),t._interval=null,o.volume(t._fadeTo,e),t._fadeTo=null,o._emit("fade",e)),o},loop:function(){var e,n,o,t=this,r=arguments;if(0===r.length)return t._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(o=t._soundById(parseInt(r[0],10)))&&o._loop;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var a=t._getSoundIds(n),u=0;u<a.length;u++)(o=t._soundById(a[u]))&&(o._loop=e,t._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e,e&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop)));return t},rate:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var i;if("number"!=typeof e)return i=t._soundById(o),i?i._rate:t._rate;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,r)}}),t;void 0===o&&(t._rate=e),o=t._getSoundIds(o);for(var d=0;d<o.length;d++)if(i=t._soundById(o[d])){t.playing(o[d])&&(i._rateSeek=t.seek(o[d]),i._playStart=t._webAudio?n.ctx.currentTime:i._playStart),i._rate=e,t._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):i._node&&(i._node.playbackRate=e);var _=t.seek(o[d]),s=(t._sprite[i._sprite][0]+t._sprite[i._sprite][1])/1e3-_,l=1e3*s/Math.abs(i._rate);!t._endTimers[o[d]]&&i._paused||(t._clearTimer(o[d]),t._endTimers[o[d]]=setTimeout(t._ended.bind(t,i),l)),t._emit("rate",i._id)}return t},seek:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):t._sounds.length&&(o=t._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));if(void 0===o)return t;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"seek",action:function(){t.seek.apply(t,r)}}),t;var i=t._soundById(o);if(i){if(!("number"==typeof e&&e>=0)){if(t._webAudio){var d=t.playing(o)?n.ctx.currentTime-i._playStart:0,_=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(_+d*Math.abs(i._rate))}return i._node.currentTime}var s=t.playing(o);s&&t.pause(o,!0),i._seek=e,i._ended=!1,t._clearTimer(o),t._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var l=function(){t._emit("seek",o),s&&t.play(o,!0)};if(s&&!t._webAudio){var c=function(){t._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return t},playing:function(e){var n=this;if("number"==typeof e){var o=n._soundById(e);return!!o&&!o._paused}for(var t=0;t<n._sounds.length;t++)if(!n._sounds[t]._paused)return!0;return!1},duration:function(e){var n=this,o=n._duration,t=n._soundById(e);return t&&(o=n._sprite[t._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,o=e._sounds,t=0;t<o.length;t++)o[t]._paused||e.stop(o[t]._id),e._webAudio||(e._clearSound(o[t]._node),o[t]._node.removeEventListener("error",o[t]._errorFn,!1),o[t]._node.removeEventListener(n._canPlayEvent,o[t]._loadFn,!1),n._releaseHtml5Audio(o[t]._node)),delete o[t]._node,e._clearTimer(o[t]._id);var a=n._howls.indexOf(e);a>=0&&n._howls.splice(a,1);var u=!0;for(t=0;t<n._howls.length;t++)if(n._howls[t]._src===e._src||e._src.indexOf(n._howls[t]._src)>=0){u=!1;break}return r&&u&&delete r[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,o,t){var r=this,a=r["_on"+e];return"function"==typeof n&&a.push(t?{id:o,fn:n,once:t}:{id:o,fn:n}),r},off:function(e,n,o){var t=this,r=t["_on"+e],a=0;if("number"==typeof n&&(o=n,n=null),n||o)for(a=0;a<r.length;a++){var u=o===r[a].id;if(n===r[a].fn&&u||!n&&u){r.splice(a,1);break}}else if(e)t["_on"+e]=[];else{var i=Object.keys(t);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(t[i[a]])&&(t[i[a]]=[])}return t},once:function(e,n,o){var t=this;return t.on(e,n,o,1),t},_emit:function(e,n,o){for(var t=this,r=t["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==n&&"load"!==e||(setTimeout(function(e){e.call(this,n,o)}.bind(t,r[a].fn),0),r[a].once&&t.off(e,r[a].fn,r[a].id));return t._loadQueue(e),t},_loadQueue:function(e){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===e&&(n._queue.shift(),n._loadQueue()),e||o.action()}return n},_ended:function(e){var o=this,t=e._sprite;if(!o._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(o._ended.bind(o,e),100),o;var r=!(!e._loop&&!o._sprite[t][2]);if(o._emit("end",e._id),!o._webAudio&&r&&o.stop(e._id,!0).play(e._id),o._webAudio&&r){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),a)}return o._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),n._autoSuspend()),o._webAudio||r||o.stop(e._id,!0),o},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var o=n._soundById(e);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new t(e)},_drain:function(){var e=this,n=e._pool,o=0,t=0;if(!(e._sounds.length<n)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&o++;for(t=e._sounds.length-1;t>=0;t--){if(o<=n)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),o--)}}},_getSoundIds:function(e){var n=this;if(void 0===e){for(var o=[],t=0;t<n._sounds.length;t++)o.push(n._sounds[t]._id);return o}return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=r[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),o},_cleanBuffer:function(e){var o=this,t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,o},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var t=function(e){this._parent=e,this.init()};t.prototype={init:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,t=n._muted||e._muted||e._parent._muted?0:e._volume;return o._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(t,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload="auto",e._node.volume=t*n.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;o._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)}};var r={},a=function(e){var n=e._src;if(r[n])return e._duration=r[n].duration,void d(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),t=new Uint8Array(o.length),a=0;a<o.length;++a)t[a]=o.charCodeAt(a);i(t.buffer,e)}else{var _=new XMLHttpRequest;_.open("GET",n,!0),_.withCredentials=e._xhrWithCredentials,_.responseType="arraybuffer",_.onload=function(){var n=(_.status+"")[0];if("0"!==n&&"2"!==n&&"3"!==n)return void e._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");i(_.response,e)},_.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete r[n],e.load())},u(_)}},u=function(e){try{e.send()}catch(n){e.onerror()}},i=function(e,o){var t=function(){o._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&o._sounds.length>0?(r[o._src]=e,d(o,e)):t()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(a).catch(t):n.ctx.decodeAudioData(e,a,t)},d=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=o?parseInt(o[1],10):null;if(e&&t&&t<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());(n._navigator&&n._navigator.standalone&&!r||n._navigator&&!n._navigator.standalone&&!r)&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:n,Howl:o}}),"undefined"!=typeof exports&&(exports.Howler=n,exports.Howl=o),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=n,window.Howl=o,window.Sound=t):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=n,global.Howl=o,global.Sound=t)}();
!function(){"use strict";function o(){var o=window,t=document;if(!("scrollBehavior"in t.documentElement.style&&!0!==o.__forceSmoothScrollPolyfill__)){var l,e=o.HTMLElement||o.Element,r=468,i={scroll:o.scroll||o.scrollTo,scrollBy:o.scrollBy,elementScroll:e.prototype.scroll||n,scrollIntoView:e.prototype.scrollIntoView},s=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now,c=(l=o.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(l)?1:0);o.scroll=o.scrollTo=function(){void 0!==arguments[0]&&(!0!==f(arguments[0])?h.call(o,t.body,void 0!==arguments[0].left?~~arguments[0].left:o.scrollX||o.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:o.scrollY||o.pageYOffset):i.scroll.call(o,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:o.scrollX||o.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:o.scrollY||o.pageYOffset))},o.scrollBy=function(){void 0!==arguments[0]&&(f(arguments[0])?i.scrollBy.call(o,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(o,t.body,~~arguments[0].left+(o.scrollX||o.pageXOffset),~~arguments[0].top+(o.scrollY||o.pageYOffset)))},e.prototype.scroll=e.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==f(arguments[0])){var o=arguments[0].left,t=arguments[0].top;h.call(this,this,void 0===o?this.scrollLeft:~~o,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},e.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==f(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},e.prototype.scrollIntoView=function(){if(!0!==f(arguments[0])){var l=function(o){for(;o!==t.body&&!1===(e=p(l=o,"Y")&&a(l,"Y"),r=p(l,"X")&&a(l,"X"),e||r);)o=o.parentNode||o.host;var l,e,r;return o}(this),e=l.getBoundingClientRect(),r=this.getBoundingClientRect();l!==t.body?(h.call(this,l,l.scrollLeft+r.left-e.left,l.scrollTop+r.top-e.top),"fixed"!==o.getComputedStyle(l).position&&o.scrollBy({left:e.left,top:e.top,behavior:"smooth"})):o.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function n(o,t){this.scrollLeft=o,this.scrollTop=t}function f(o){if(null===o||"object"!=typeof o||void 0===o.behavior||"auto"===o.behavior||"instant"===o.behavior)return!0;if("object"==typeof o&&"smooth"===o.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+o.behavior+" is not a valid value for enumeration ScrollBehavior.")}function p(o,t){return"Y"===t?o.clientHeight+c<o.scrollHeight:"X"===t?o.clientWidth+c<o.scrollWidth:void 0}function a(t,l){var e=o.getComputedStyle(t,null)["overflow"+l];return"auto"===e||"scroll"===e}function d(t){var l,e,i,c,n=(s()-t.startTime)/r;c=n=n>1?1:n,l=.5*(1-Math.cos(Math.PI*c)),e=t.startX+(t.x-t.startX)*l,i=t.startY+(t.y-t.startY)*l,t.method.call(t.scrollable,e,i),e===t.x&&i===t.y||o.requestAnimationFrame(d.bind(o,t))}function h(l,e,r){var c,f,p,a,h=s();l===t.body?(c=o,f=o.scrollX||o.pageXOffset,p=o.scrollY||o.pageYOffset,a=i.scroll):(c=l,f=l.scrollLeft,p=l.scrollTop,a=n),d({scrollable:c,method:a,startTime:h,startX:f,startY:p,x:e,y:r})}}"object"==typeof exports&&"undefined"!=typeof module?module.exports={polyfill:o}:o()}();
let questai_model=function(){let t=null,e={};function n(t,e){return void 0===t?e:t}function o(){let e=function(){let t={},e=document.location.search;if(e){let n;e=e.split("+").join(" ");let o=/[?&]?([^=]+)=([^&]*)/g;for(;n=o.exec(e);)t[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}return t}();t.isDebug=n(e.debug,!1);let o=n(e.tags,null)||n(e.tag,null);o&&(t.tags=o);for(let n in e)if(e.hasOwnProperty(n)&&n.startsWith("ac_")&&n.length>3){let o=n.substring(3);t[o]=e[n],t.isDebug&&console.log(" Setting the key ["+o+"] to ["+e[n]+"]")}let i=t.ad_server?t.ad_server:window.location.hostname,s=0===window.location.protocol.indexOf("https"),l=i.indexOf("://"),r=window.location.port.length>0?":"+window.location.port:"",c=t.isDebug?window.location.hostname:l>0?i.substring(l+3):i;t.webServerUrl=t.isDebug?"":(s?"https://":"http://")+c+r;let u=i;if(t.isDebug){let t=window.location.href.split("/");u=t[0]+"//"+t[2]}t.serverUrl=u,t.errSent=!1,t.sentEvents={},t.is_creator_build||a("GET","/api/domains/shouldShow/"+t.account_id,null).then(function(t){if(t&&!0===t.showMadeWithQuest){let t=document.getElementById("__questb_logo");t&&(t.style.display="block")}})}function a(e,n,o){return new Promise(function(a,i){let s=!1,l=new XMLHttpRequest;l.withCredentials=!0,l.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){let t=JSON.parse(this.responseText);t&&(t.get=function(t){return this[t]}),a(t),s=!0}else console.log("something else other than 200 was returned. Error: "+this.status),window.ga&&!t.errSent&&(t.errSent=!0,window.ga("send","exception",{exDescription:"http error: "+this.status,exFatal:!1})),i({status:this.status,data:this.responseText})},l.open(e,t.webServerUrl+n,!0),o?(l.setRequestHeader("Content-Type","application/json"),l.send(o)):l.send()})}return e.init=function(e){window.gc_website_load_start=Date.now(),t=e,o()},e.saveData=function(t,e){return new Promise(function(n,o){let i=Object.keys(e),s={};for(let t=0;t<i.length;t++){let n=i[t].indexOf(".");if(n>0){let o=i[t].substring(0,n),a=i[t].substring(n+1,i[t].length);s[o]||(s[o]={}),s[o][a]=e[i[t]]}else s[i[t]]=e[i[t]]}a("POST","/api/v1/data/"+t+"/insert",JSON.stringify(s)).then(function(t){n()},function(t){console.log(t),o(new Error("Failed to save data"))})})},e.getData=function(t,e,n){return new Promise(function(o,i){a("GET","/api/v1/data/"+t+"/get?start="+e+"&rowCount="+n,null).then(function(t){t&&t.data&&t.data.data&&t.data.data.length>0?o(t.data.data[0]):(console.log("The data row is empty for this data source ?"),o([]))},function(t){console.log(t),i(new Error("Failed to get the data"))})})},e.getBatchData=function(t,e,n){return new Promise(function(o,i){a("GET","/api/v1/data/"+t+"/get?start="+e+"&rowCount="+n,null).then(function(t){t&&t.data?o(t.data):(console.log("The data row is empty for this data source ?"),o({data:[],columns:[]}))},function(t){console.log(t),i(new Error("Failed to get the data"))})})},e.logAnalytics=function(e,n,o,i,s,l){let r;r=i?e+":"+n+":"+o+":"+i+":"+s:e+":"+n+":"+o;let c=t.sentEvents[r];if(c&&Date.now()-c<5e3)return void console.log("Duplicate event ?:"+r);var u;t.sentEvents[r]=Date.now(),Object.keys(t.sentEvents)>200&&(console.log("Error: why do we have so many events?"),t.sentEvents={}),i&&0!==i.trim().length||(i="Interaction Time",s=u?Date.now()-u:Date.now()-window.gc_website_load_start);let d={account_id:t.account_id,campaign_id:t.campaign_id,page:e,key:n,value:o,key2:i,value2:s};window.ga&&!l&&("number"==typeof o?window.ga("send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:e+":"+n,eventValue:o}):window.ga("send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:o})),function(e){return new Promise(function(n,o){e.created=(new Date).getTime(),e.game=window.location.hostname+":/"+window.location.pathname;let i=encodeURIComponent(JSON.stringify(e));t.isDebug&&console.log("Using http"),i.length<1024?a("GET","/api/analytics/event/V2?msg="+i,"").then(function(t){n(t)},function(t){o(t)}):a("POST","/api/analytics/event/V2?",i).then(function(t){n(t)},function(t){o(t)})})}(d).then(function(e){t.isDebug&&(console.log("Analytics data sent:"),console.log(d),console.log("wrote Analytics. Output:"),console.log(e))})},e}();
let questaiFn=function(){let gameConfig,audioJson,allElements={},allGroups={},elemConfigs={},groupConfigs={},inputFields={},currentArtboard="",currentElement=null,currentElementDiv=null,currentElementTopDiv=null,currentElementBottomDiv=null,currentElementLeftDiv=null,currentElementRightDiv=null,currentElementTopLeftDiv=null,currentElementTopRightDiv=null,currentElementBottomLeftDiv=null,currentElementBottomRightDiv=null,currentTweens=[],eventFns={},delayedCalls=[],audioSprite=null,audiosPlaying=[],originalProperties={},previewCurrentElement=null,sizingTextDiv,idIndex=1,offsetX,pageScale,parallaxScrollElements=[],scrollTriggersFired=[],fireScrollOffTriggers=[],__internalDynamicFields={},__enableScaleMax=!1;const fontWeightMapping={Thin:100,ExtraLight:200,UltraLight:200,Light:300,Regular:400,Normal:400,Medium:500,SemiBold:600,DemiBold:600,Bold:700,ExtraBold:800,UltraBold:800,Black:900,Heavy:900};let playingTimelines={};const groupPropertiesToSave=["x","y","width","height","scaleX","scaleY","angle","alpha","visible","name"],elementPropertiesToSave=["x","y","width","height","scaleX","scaleY","angle","alpha","visible","name"],textPropertiesToSave=["fontFamily","fontWeight","fontSize","text","lineHeight","letterSpacing"];let isWebpSupported=!1;try{isWebpSupported=0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){}function changeGuid(e,t,i){if("element"===i){let i=questai.getElement(e);delete allElements[e],i.setAttribute("data-guid",t),allElements[t]=i}else{let i=questai.getElement(e);delete allGroups[e],i.setAttribute("data-guid",t),allGroups[t]=i}}function getScaleMultiplier(){return 1}function calculateScaleDetails(){let e,t=document.querySelector("#websitediv").getBoundingClientRect();if(!(e=gameConfig.is_creator_build?currentArtboard?gameConfig.artBoards.find(e=>e.name===currentArtboard):gameConfig.artBoards[0]:getArtboardBasedOnWidth()))return;let i=e.width,a=1.25;i<400?a=2:i<1025&&(a=1.5),gameConfig.is_creator_build&&i<t.width?(pageScale=1,offsetX=Math.floor((t.width-i)/2),__enableScaleMax=!1):(pageScale=t.width/i,a&&a<pageScale?(pageScale=a,offsetX=Math.floor((t.width-i*pageScale)/2),__enableScaleMax=!0):(offsetX=0,__enableScaleMax=!1))}function getScaleDetails(){return{offsetX:offsetX,pageScale:pageScale}}function positionElement(e){if(e.style.position=e.getAttribute("data-position"),e.style.transformOrigin="center cernter",e.getAttribute("data-src")&&e.getAttribute("data-ab")===currentArtboard){let t=e.getAttribute("data-src");t.startsWith("http:")||t.startsWith("https:")?e.src=t:e.src&&e.src.indexOf("/"+e.getAttribute("data-src"))<0&&(e.src=getCdnImageLocation()+e.getAttribute("data-src")+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""))}let t,i,a=getScaleDetails(),n=getScaleMultiplier();if(e.getAttribute("data-position"),t=parseFloat(e.getAttribute("data-x"))-parseFloat(e.getAttribute("data-xoffset")?e.getAttribute("data-xoffset"):0),i=parseFloat(e.getAttribute("data-y"))-parseFloat(e.getAttribute("data-yoffset")?e.getAttribute("data-yoffset"):0),"XD"===gameConfig.game_source&&"text"===e.getAttribute("data-elementType")&&("true"===e.getAttribute("data-hm")||parseFloat(e.getAttribute("data-height"))>parseFloat(e.getAttribute("data-lineHeight")))&&e.getAttribute("data-lineHeight")&&e.getAttribute("data-ch")){let t=parseFloat(e.getAttribute("data-ch")),a=parseFloat(e.getAttribute("data-lineHeight"));if(t>0&&isFinite(a)){i-=(a-t)/2}}let l=e.getAttribute("data-width"),o=e.getAttribute("data-widthchanged")||"text"!==e.getAttribute("data-elementType");if("true"!==o&&!0!==o&&e.getAttribute("data-fw")){let i=parseFloat(e.getAttribute("data-fw")),a=parseFloat(e.getAttribute("data-width"));if(a<i){l=i;let n=(i-a)/2,o=e.style.textAlign;"left"===o?t+=n:"right"===o&&(t-=n),e.style.width=i+"px"}}let r=t*a.pageScale-l/2,s=i*a.pageScale-e.getAttribute("data-height")/2;if(e.getAttribute("data-leftOffset")){let t,i,n=parseFloat(e.getAttribute("data-leftOffset")),l=parseFloat(e.getAttribute("data-rightOffset")),o=parseFloat(e.getAttribute("data-topOffset")),u=parseFloat(e.getAttribute("data-bottomOffset"));r-=t=0===parseFloat(e.getAttribute("data-originX"))?n*a.pageScale:1===parseFloat(e.getAttribute("data-originX"))?-l*a.pageScale:(n+l)/2-(l-n)/2*a.pageScale,s-=i=0===parseFloat(e.getAttribute("data-originY"))?o*a.pageScale:1===parseFloat(e.getAttribute("data-originY"))?-u*a.pageScale:(o+u)/2-(u-o)/2*a.pageScale}let u=getScrollTransformForDiv(e);e.style.transform="translate3d( 0px, "+u+"px, 0px) translate("+r+"px,"+s+"px) scale("+e.getAttribute("data-scaleX")*a.pageScale*n+","+e.getAttribute("data-scaleY")*a.pageScale*n+") rotate("+e.getAttribute("data-angle")+"deg)";let d=e.getAttribute("data-co");e.getAttribute("data-ns");if(d)try{let t=JSON.parse(d),i=Object.keys(t);for(let a=0;a<i.length;a++)e.style[i[a]]=t[i[a]]}catch(e){console.log("Failed to apply css override"),console.log(e)}if(e.getAttribute("data-s")){let t=document.getElementById(e.getAttribute("data-s"));if(t)if(null===e.offsetParent||"none"===window.getComputedStyle(e).display)t.style.display="none";else{e.getBoundingClientRect();t.style.left="0px",t.style.top="0px",t.style.display="block",t.style.transformOrigin="top left",t.style.transform="scale("+e.getAttribute("data-scaleX")*a.pageScale*n+","+e.getAttribute("data-scaleY")*a.pageScale*n+") translate("+(parseInt(t.getAttribute("data-l"))+offsetX)+"px, "+t.getAttribute("data-t")+"px)"}}}function positionGroup(e){e.style.position=e.getAttribute("data-position");let t=null;"fixed"===e.getAttribute("data-position")&&(t=e.getAttribute("data-position-location"));let i,a,n=getScaleDetails(),l=e.getAttribute("data-co");e.getAttribute("data-ns");"absolute"===e.getAttribute("data-position")?(i=parseFloat(e.getAttribute("data-x"))+parseFloat(e.getAttribute("data-computedx"))-parseFloat(e.getAttribute("data-xoffset")),a=parseFloat(e.getAttribute("data-y"))+parseFloat(e.getAttribute("data-computedy"))-parseFloat(e.getAttribute("data-yoffset"))):(i=parseFloat(e.getAttribute("data-x"))+parseFloat(e.getAttribute("data-computedx")),a=parseFloat(e.getAttribute("data-y"))+parseFloat(e.getAttribute("data-computedy")));let o=(i-e.getAttribute("data-width")/2)*n.pageScale,r=(a-e.getAttribute("data-height")/2)*n.pageScale;if(e.getAttribute("data-leftOffset")){o-=parseFloat(e.getAttribute("data-leftOffset")),r-=parseFloat(e.getAttribute("data-topOffset"))}t&&"bottom"===t?(e.style.bottom=0,e.style.top=null):e.style.top=r+"px",e.style.left=o+"px",e.getAttribute("data-width")&&(e.style.width=e.getAttribute("data-width")*n.pageScale+"px"),e.getAttribute("data-height")&&(e.style.height=e.getAttribute("data-height")*n.pageScale+"px");let s=getScrollTransformForDiv(e);if("Artboards"===e.getAttribute("data-guid")&&0!==n.offsetX?e.style.transform="translateX("+n.offsetX+"px)":"1"===e.getAttribute("data-scaleX").toString()&&"1"===e.getAttribute("data-scaleY").toString()&&"0"===e.getAttribute("data-angle").toString()?e.style.transform=0!==s?"translate3d( 0px, "+s+"px, 0px)":"none":e.style.transform=0!==s?"translate3d( 0px, "+s+"px, 0px) scale("+e.getAttribute("data-scaleX")+","+e.getAttribute("data-scaleY")+") rotate("+e.getAttribute("data-angle")+"deg)":"scale("+e.getAttribute("data-scaleX")+","+e.getAttribute("data-scaleY")+") rotate("+e.getAttribute("data-angle")+"deg)",l)try{let t=JSON.parse(l),i=Object.keys(t);for(let a=0;a<i.length;a++)e.style[i[a]]=t[i[a]]}catch(e){console.log("Failed to apply css override"),console.log(e)}}function adjustWidthBasedOnOverride(e){let t=e.getAttribute("data-widthchanged");if("true"===t||!0===t)return void positionElement(e);let i=e.getAttribute("data-guid"),a=elemConfigs[i],n=document.querySelector("#websitediv");sizingTextDiv||((sizingTextDiv=document.createElement("div")).style.position="absolute");let l="";l+="font-weight:"+e.style.fontWeight+"; font-family: "+e.style.fontFamily+"; font-size:"+e.style.fontSize+"; font-style:"+e.style.fontStyle+"; position: absolute;  ",e.style.lineHeight?l+="line-height:"+e.style.lineHeight+";":l+="line-height:"+e.height+";",e.style.letterSpacing&&(l+="letter-spacing:"+e.style.letterSpacing+";"),!0!==e.getAttribute("data-widthchanged")&&"true"!==e.getAttribute("data-widthchanged")||(l+="width: "+e.style.width+";");let o=0,r=null;if(a.lines&&a.lines.length>0&&(r=JSON.parse(atob(a.lines))),sizingTextDiv.style=l,n.appendChild(sizingTextDiv),r&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e],i=(new DOMParser).parseFromString("<!doctype html><body>"+t,"text/html").body.textContent;sizingTextDiv.innerText=i;let a=sizingTextDiv.getBoundingClientRect();a.width>o&&(o=a.width+1)}n.removeChild(sizingTextDiv),o=parseInt(Math.ceil(o)),a.fuzzyWidth=o,e.setAttribute("data-fw",o),positionElement(e)}function getValueFromDataFeature(e){return new Promise(function(t,i){let a=e.dataSetId,n=e.colNum,l=gameConfig.data_sets.find(e=>e.id===a),o=l.dataSourceId,r=l.dataRange;questai_model.getData(o,r,1).then(e=>{if(e&&e.length>0){let i=e[n-1];t(i)}},e=>{console.log("Error in get value from data feature"),console.log(e),i(new Error("Failed to get the data"))})})}function setElementValueFromDataFeature(e,t,i){getValueFromDataFeature(e).then(e=>{t[i]=e},e=>{})}function rescaleElement(e){if("element"===e.getAttribute("data-type"))positionElement(e);else if("group"===e.getAttribute("data-type")){positionGroup(e);for(let t of e.children)rescaleElement(t)}}function getArtboardBasedOnWidth(){let e=document.querySelector("#websitediv").getBoundingClientRect().width,t=gameConfig.artBoards,i=null;for(let a of t)e>a.minWidth&&(e<=a.maxWidth||-1===a.maxWidth)&&(i=a);return i}function setArtboard(e){if(e===currentArtboard)return;currentArtboard=e;let t=gameConfig.artBoards.find(t=>t.name===e);questai.setBackgroundColor(t.bgColor);let i=questai.getGroup("Artboards");if(i)for(ab of i.children)ab.getAttribute("data-name")===e?(ab.style.display="block",gameConfig.is_creator_build||handleFeaturesForDiv(ab)):ab.style.display="none"}function getStyleForSpan(e,t){let i=e.color,a=getValidFontFamily(e.fontFamily)+", sans-serif",n=e.fontSize,l=e.fontWeight,o=e.charSpacing,r=e.lineSpacing,s=(e.lineHeightPercent,"normal");e.fontStyle&&fontWeightMapping[e.fontStyle]?l=fontWeightMapping[e.fontStyle]:e.fontStyle&&e.fontStyle.toLowerCase().indexOf(" italic")>=0&&(s="italic");let u="display: inline; ";return i&&(u+="color: #"+i+";"),u+=`font-style: ${s}; font-weight:`+l+"; font-family: "+a+"; font-size:"+n+"px ;",null!=o&&0!==o&&(u+="letter-spacing: "+o+"px;"),null!=r&&(u+="line-height: "+r+"px;"),!0===e.underline?u+=" text-decoration: underline; ":!1===e.underline&&(u+=" text-decoration: none; "),e.strikethrough&&(u+=" text-decoration: line-through; "),e.paragraphIndent&&(u+=" text-indent: "+elemConfig.paragraphIndent+"px ; "),t?(u+="cursor: pointer;",u+="pointer-events: auto;"):u+="pointer-events: none;",u}function createSpanElement(e,t,i,a,n){let l=document.createElement("span"),o=t.text.substring(a,a+i.length);if(o)switch(t.textTransform){case"uppercase":o=o.toLocaleUpperCase();break;case"lowercase":o=o.toLocaleLowerCase();break;case"titlecase":let e=o.split(" ");e.forEach((e,t,i)=>{i[t]=e?e.charAt(0).toLocaleUpperCase()+e.substring(1):e}),o=e.join(" ")}l.innerText=o;let r=getStyleForSpan(i,n);l.style=r,e.appendChild(l)}function constructMultiStyleText(e,t,i){let a=0,n=0,l=null;for(let o of t.styleRanges){let r=!1;i.includes(n)&&(r=!0),createSpanElement(e,t,o,a,r),a+=o.length,n++,l=o}let o=t.text;if(l&&o.length>a){let r=!1;i.includes(n)&&(r=!0),l.length=o.length-a,createSpanElement(e,t,l,a,r)}}function isFullyContained(e,t){let i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return 0!==i.width&&0!==a.height&&0!==a.width&&0!==a.height&&(a.left>=i.left&&a.left<=i.left+i.width&&a.left+a.width>=i.left&&a.left+a.width<=i.left+i.width&&a.top>=i.top&&a.top<=i.top+i.height&&a.top+a.height>=i.top&&a.top+a.height<=i.top+i.height)}function getContainingElement(e,t){let i=e.getAttribute("data-guid");if(!i)return null;let a=i.split(":")[0],n=(gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[]).filter(e=>e.type===t),l=null;for(let i of n){if(i.guid.split(":")[0]!==a)continue;let n=questai.getElement(i.guid);if(n&&(("click"!==t||"text"!==n.getAttribute("data-elementType"))&&isFullyContained(n,e))){l=n;break}}return l}function setupDynamicImageElement(e,t){let i,a=document.createElement("div");return a.width=e.w,a.height=e.h,i=e.imgSrc&&e.imgSrc.length>0?e.imgSrc:e.svgSrc&&e.svgSrc.length>0?e.svgSrc:getCdnImageLocation()+getOptimalImageName(e)+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""),a.style.backgroundImage=i,a.setAttribute("data-q-name",getOptimalImageName(e)),a.setAttribute("data-elementType","image"),a.alt=t?t.altText:e.name?e.name:e.guid,a}function getOptimalImageName(e){let t=e.imageFileName;return e.hasWebp&&isWebpSupported?t=e.imageFileName.substring(0,e.imageFileName.length-4)+".webp":e.hasJpeg&&(t=e.imageFileName.substring(0,e.imageFileName.length-4)+".jpg"),t}function getCdnImageLocation(){return!gameConfig.is_creator_build&&gameConfig.cdn_server&&gameConfig.cdn_path?window.location.protocol+"//"+gameConfig.cdn_server+(window.location.port&&window.location.port.length>0?":"+window.location.port:"")+"/api/cdn/assets/images/"+gameConfig.cdn_path+"/":"assets/images/"}function setupImageElement(e,t){let i=document.createElement("img");return i.width=e.w,i.height=e.h,e.imgSrc&&e.imgSrc.length>0?i.src=e.imgSrc:e.svgSrc&&e.svgSrc.length>0?i.src=e.svgSrc:(e.artBoardName&&e.artBoardName===currentArtboard?i.src=getCdnImageLocation()+getOptimalImageName(e)+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""):i.src="",i.setAttribute("data-src",getOptimalImageName(e)),i.setAttribute("data-ab",e.artBoardName)),i.setAttribute("data-q-name",e.imageFileName),i.setAttribute("data-elementType","image"),i.alt=t?t.altText:e.name?e.name:e.guid,i}function loadDynamicData(e){return new Promise(function(t,i){let a=new XMLHttpRequest;a.withCredentials=!0,a.onreadystatechange=function(){4==this.readyState&&(200==this.status?t(this.responseText):(console.log("something else other than 200 was returned. Error: "+this.status),i({status:this.status,data:this.responseText})))},a.open("GET",e,!0),a.send()})}function processDynamicUrl(e,t,i){let a=t.dynamicURL;a.endsWith(".png")||a.endsWith(".jpg")||a.endsWith(".gif")||a.endsWith(".jpeg")?i.src=a:loadDynamicData(a).then(function(e){i.innerHTML=e})}function processHTMLSnippet(e,t,i){let a="__snip_"+t.id,n=document.getElementById(a);if(n)if(!1===t.reparent){i.setAttribute("data-s",a);let t=Math.ceil(e.x-e.w/2),l=Math.ceil(e.y-e.h/2);n.setAttribute("data-l",t),n.setAttribute("data-t",l),n.style=i.style,n.style.position="absolute",n.style.left=t+"px",n.style.bottom=i.style.bottom,n.style.top=l+"px",n.style.width=e.w+"px",n.style.height=e.h+"px",null===i.offsetParent||"none"===window.getComputedStyle(i).style.display?n.style.display="none":n.style.display="block"}else n.style.display="block",n.style.position="",n.style.left="",n.style.top="",n.style.transformOrigin="",n.style.transform="",n.style.width=e.w+"px",n.style.height=e.h+"px",i.appendChild(n)}function setupIFrameElement(e,t){let i=document.createElement("iframe");i.height=e.h,i.width=e.w;let a,n=t.iframeURL;if(n.startsWith("<iframe")){let e=n.indexOf('src="');a=(n=n.substring(e+4,n.length)).split(/"/),n=a[1]}return i.src=n,i.setAttribute("data-elementType","iframe"),i}function getUrlParams(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,a){t[i]=a}),t}function getYoutubeEmbedUrl(e){return"https://www.youtube.com/embed/"+getUrlParams(e).v}function setupVideoElement(e,t){let i;(i="youtubeUrl"===t.videoType?document.createElement("iframe"):document.createElement("video")).height=e.h,i.width=e.w;let a=null;if("youtubeUrl"===t.videoType?(a=getYoutubeEmbedUrl(t.videoSource),i.frameBorder="0"):i.src="assets/"+t.videoSource+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""),t.autoplay?"youtubeUrl"===t.videoType?a+="?autoplay=1":i.autoplay=t.autoplay:"youtubeUrl"===t.videoType&&(a+="?autoplay=0"),t.controls?"youtubeUrl"===t.videoType?a+="&controls=1":i.controls=t.controls:"youtubeUrl"===t.videoType&&(a+="&controls=0"),t.loop)if("youtubeUrl"===t.videoType){let e=getUrlParams(t.videoSource).playlist,i=getUrlParams(t.videoSource).v;a+="&loop=1",e||(a+="&playlist="+i)}else i.loop=t.loop;else"youtubeUrl"===t.videoType&&(a+="&loop=0");return t.muted?"youtubeUrl"===t.videoType?a+="&mute=1":i.muted=t.muted:"youtubeUrl"===t.videoType&&(a+="&mute=0"),t.playsInline?"youtubeUrl"===t.videoType?a+="&playsinline=1":i.playsInline=t.playsInline:"youtubeUrl"===t.videoType&&(a+="&playsinline=0"),"youtubeUrl"===t.videoType&&(i.src=a),i.setAttribute("data-elementType","video"),i}function handleEvent(e,t,i,a){let n=e;(i.includes("scrollTrigger")||i.includes("scrollOffTrigger"))&&t();let l=!1;i.includes("clickOutside")&&(l=!0,i=["click","touchstart"],n=document.querySelector("#websitediv"));for(let o of i){eventFns[a]&&eventFns[a][o]&&n.removeEventListener(o,eventFns[a][o]);let i=function(e){return e.preventDefault(),t()};l&&(i=function(i){if("none"===e.style.display)return;let a=e.getBoundingClientRect();i.clientX>=a.left&&i.clientX<=a.left+a.width&&i.clientY>=a.top&&i.clientY<=a.top+a.height||t()}),eventFns[a]||(eventFns[a]={}),eventFns[a][o]=i,n.addEventListener(o,i)}}function setupInteractionFeatures(e,t,i,a,n){if(gameConfig.is_creator_build)return;let l=gameConfig.overrides&&gameConfig.overrides.featureActions?gameConfig.overrides.featureActions:[];if(l&&0!==l.length){if(t&&t.length>0)for(let i of t)handleFeatureActions(e,i,"click",i.actions,l);i&&handleFeatureActions(e,i,"clickOutside",i.actions,l),a&&handleFeatureActions(e,a,"mouseOver",a.actions,l),n&&handleFeatureActions(e,n,"mouseOut",n.actions,l)}}function getPageComponentForElement(e){let t=gameConfig.overrides.components;if(!t||0===t.length)return null;let i=t.filter(e=>"page"===e.type);if(i)for(let t of i){let i=questai.getGroup(t.guid);if(i||(i=questai.getElement(t.guid)),isChildOfQuestNode(i,e))return t}return null}function isChildOfQuestNode(e,t){if(e.getAttribute("data-guid")===t)return!0;if(e.children)for(let i of e.children)if(isChildOfQuestNode(i,t))return!0}function getCustomNamespace(e){let t=getPageComponentForElement(e.getAttribute("data-guid")),i="questai_custom";return t&&(i=i+"_"+t.projectId),i}function handleFeatureActions(div,feature,type,actions,allFeatureActions){let featureActions=allFeatureActions.filter(e=>actions.includes(e.id)),triggerTypes=[type];if("click"===type?triggerTypes=["click"]:"mouseOver"===type?triggerTypes=["mouseover"]:"mouseOut"===type?triggerTypes=["mouseleave"]:"clickOutside"===type&&(triggerTypes=["clickOutside"]),feature.textPortion&&"ALL"!==feature.textPortion){let e=parseInt(feature.textPortion),t=div.children;e&&t&&t.length>0&&e<t.length&&(div=t[e])}for(let fa of featureActions)if("anchorLink"===fa.type){let e=fa.linkName;e.startsWith("#")||(e="#"+e),div.href=e}else if("scrollTo"===fa.type){let e=questai.getElement(fa.guid);e||(e=questai.getGroup(fa.guid));let t=fa.smooth,i="auto";t&&(i="smooth"),e&&handleEvent(div,function(){e.scrollIntoView({behavior:i,block:"start",inline:"center"})},triggerTypes,fa.id)}else if("url"===fa.type){let e=fa.url;!fa.url||fa.url.trim().startsWith("/")||fa.url.trim().startsWith("http")||fa.url.trim().indexOf(":")>0?div.href=fa.url:div.href=e="http://"+fa.url;let t=fa.newTab;void 0===t&&(t=!0),handleEvent(div,function(){return questai.handleExternalLink(e,"Button click: "+div.getAttribute("data-name"),t),!1},triggerTypes,fa.id)}else if("method"===fa.type){let customNSName=getCustomNamespace(div),evalStr=customNSName+'["'+fa.methodName+'"]()';handleEvent(div,function(){eval(evalStr)},triggerTypes,fa.id)}else if("saveInputData"===fa.type){let e=fa.dataSourceId;handleEvent(div,function(){questai.saveCMSData(e)},triggerTypes,fa.id)}else if("setVisibility"===fa.type){let e=questai.getElement(fa.guid);e||(e=questai.getGroup(fa.guid));let t=fa.visible;e&&handleEvent(div,function(){e.style.display=t?"block":"none",setupPointerEventsRecursively(e),adjustGroupAndElementDimensions()},triggerTypes,fa.id)}else if("setColor"===fa.type){let e=questai.getElement(fa.guid);if(fa.textPortion&&"ALL"!==fa.textPortion){let t=parseInt(fa.textPortion),i=e.children;t&&i&&i.length>0&&t<i.length&&(e=i[t])}let t=fa.color;e&&handleEvent(div,function(){e.style.color=t},triggerTypes,fa.id)}else if("playTimeline"===fa.type){let e=gameConfig.overrides,t=e.eventTimelines,i=e.actions;handleEvent(div,function(){playTimeline(fa.timeline,t,i)},triggerTypes,fa.id)}else fa.type}function getInputValue(e){let t=inputFields[e];if(!t)return null;let i=questai.getGroup("Artboards"),a=null;for(ab of i.children)ab.getAttribute("data-name")===currentArtboard&&(a=getMatchingNodeForField(ab,t));return a?a.value:null}function getMatchingNodeForField(e,t){if(t.includes(e.getAttribute("data-guid")))return e;if(!e.children)return null;for(let i of e.children){let e=getMatchingNodeForField(i,t);if(e)return e}}function handleFeaturesForDiv(e){let t=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[],i=t.filter(t=>t.guid===e.getAttribute("data-guid")&&"click"===t.type),a=t.find(t=>t.guid===e.getAttribute("data-guid")&&"clickOutside"===t.type),n=t.find(t=>t.guid===e.getAttribute("data-guid")&&"mouseOver"===t.type),l=t.find(t=>t.guid===e.getAttribute("data-guid")&&"mouseOut"===t.type),o=t.find(t=>t.guid===e.getAttribute("data-guid")&&"snippet"===t.type),r=t.find(t=>t.guid===e.getAttribute("data-guid")&&"anchor"===t.type);if(r&&e.setAttribute("id",r.anchorName),o)e.style.pointerEvents="auto";else{for(let t of e.children)handleFeaturesForDiv(t);if("text"===e.getAttribute("data-elementType")){let i=e.getAttribute("data-guid"),a=elemConfigs[i],n=getContainingElement(e,"input");if(n){let l=e;e=document.createElement("input");let o=l.style.cssText;o=o.replace("cursor:text;","cursor:default;"),e.placeholder=a.text;let r=10,s=n.getAttribute("data-width")-2*r,u=n.getAttribute("data-height")-2*r,d=n.getAttribute("data-x"),g=n.getAttribute("data-y");e.setAttribute("data-x",d),e.setAttribute("data-y",g),e.setAttribute("data-width",s),e.setAttribute("data-height",u),e.setAttribute("data-angle",0),o.includes("width:")?o=o.replace(/width:.*px;/,"width: "+s+"px;"):o+="width: "+s+"px;",o.includes("height:")?o=o.replace(/height:.*px;/,"height: "+u+"px;"):o+="height: "+u+"px;",o+="border:none;",o+="outline:none;",o+="background-color:transparent;";let c=t.find(e=>e.guid===n.getAttribute("data-guid")&&"input"===e.type).fieldName,p=inputFields[c];p||(p=[]),p.push(i),inputFields[c]=p,a.alignment="left",o.includes("text-align:")?o=o.replace(/text-align:.*?;/,"text-align: left"):o+="text-align: left;",e.style.textAlign="left",setupRemainingPropertiesForText(e,a,l.parentNode,o,l)}let l=getContainingElement(e,"click"),o=getContainingElement(e,"mouseOver");if(l||o){let t=e.style.cssText;t=t.replace("cursor:text;","cursor:pointer;"),e.style=t}}setupInteractionFeatures(e,i,a,n,l),setupPointerEvents(e)}}function setupPointerEventsRecursively(e){if(e.getAttribute("data-name")){setupPointerEvents(e);for(let t of e.children)setupPointerEventsRecursively(t)}}function getLocalizedText(e,t){let i=t;return gameConfig.overrides&&gameConfig.overrides.gameOverride&&gameConfig.overrides.gameOverride.languages&&gameConfig.overrides.gameOverride.languages[e]&&gameConfig.overrides.gameOverride.languages[e][questai.lang]&&(i=gameConfig.overrides.gameOverride.languages[e][questai.lang]),i}function setupPointerEvents(e){if("SPAN"===e.tagName)return;let t=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[],i=t.filter(t=>t.guid===e.getAttribute("data-guid")&&"click"===t.type),a=t.find(t=>t.guid===e.getAttribute("data-guid")&&"mouseOver"===t.type),n=t.find(t=>t.guid===e.getAttribute("data-guid")&&"mouseOut"===t.type),l=t.find(t=>t.guid===e.getAttribute("data-guid")&&"video"===t.type),o=t.find(t=>t.guid===e.getAttribute("data-guid")&&"iframe"===t.type),r=null;"text"===e.getAttribute("data-elementType")&&(r=getContainingElement(e,"input"));let s=getContainingElement(e,"click");gameConfig.is_creator_build?"block"===e.style.display?e.style.pointerEvents="auto":e.style.pointerEvents="none":(i.length>0||a||n||l||o)&&"block"===e.style.display?e.style.pointerEvents="auto":r&&"block"===e.style.display?e.style.pointerEvents="auto":s&&"block"===e.style.display?e.style.pointerEvents="none":"text"===e.getAttribute("data-elementType")?e.style.pointerEvents="auto":e.style.pointerEvents="none"}function adjustGroupAndElementDimensions(){let e=questai.getGroup("Artboards");if(e)for(ab of e.children)if(ab.getAttribute("data-name")===currentArtboard){for(let e of ab.children)"group"===e.getAttribute("data-type")&&adjustGroupDimensions(e);adjustElementDimensions(ab,0,0)}}function adjustGroupDimensions(e){let t,i,a,n,l=0,o=0,r=-1,s=-1;for(let u of e.children)if("none"!==u.style.display){if("group"===u.getAttribute("data-type")){let e=adjustGroupDimensions(u);t=e.left,i=e.right,a=e.top,n=e.bottom}else{let e=0,l=0,o=0,r=0;u.getAttribute("data-leftOffset")&&(e=parseFloat(u.getAttribute("data-leftOffset")),l=parseFloat(u.getAttribute("data-rightOffset")),o=parseFloat(u.getAttribute("data-topOffset")),r=parseFloat(u.getAttribute("data-bottomOffset"))),0===parseFloat(u.getAttribute("data-originX"))?(t=parseFloat(u.getAttribute("data-x"))-e,i=parseFloat(u.getAttribute("data-x"))+parseFloat(u.getAttribute("data-width"))+l):1===parseFloat(u.getAttribute("data-originX"))?(t=parseFloat(u.getAttribute("data-x"))-parseFloat(u.getAttribute("data-width"))-e,i=parseFloat(u.getAttribute("data-x"))+l):(t=parseFloat(u.getAttribute("data-x"))-parseFloat(u.getAttribute("data-width"))/2-e,i=parseFloat(u.getAttribute("data-x"))+parseFloat(u.getAttribute("data-width"))/2+l),0===parseFloat(u.getAttribute("data-originY"))?(a=parseFloat(u.getAttribute("data-y"))-o,n=parseFloat(u.getAttribute("data-y"))+parseFloat(u.getAttribute("data-height"))+r):1===parseFloat(u.getAttribute("data-originY"))?(a=parseFloat(u.getAttribute("data-y"))-parseFloat(u.getAttribute("data-height"))-o,n=parseFloat(u.getAttribute("data-y"))+r):(a=parseFloat(u.getAttribute("data-y"))-parseFloat(u.getAttribute("data-height"))/2-o,n=parseFloat(u.getAttribute("data-y"))+parseFloat(u.getAttribute("data-height"))/2+r)}(t<r||-1===r)&&(r=t),i>l&&(l=i),(a<s||-1===s)&&(s=a),n>o&&(o=n)}return e.setAttribute("data-computedx",Math.round(r+(l-r)/2)),e.setAttribute("data-computedy",Math.round(s+(o-s)/2)),e.setAttribute("data-width",Math.round(l-r)),e.setAttribute("data-height",Math.round(o-s)),positionGroup(e),{left:r,right:l,top:s,bottom:o}}function adjustElementDimensions(e,t,i){for(let a of e.children)if("group"===a.getAttribute("data-type")){let n=getScaleDetails();a.setAttribute("data-xoffset",parseFloat(t)-(e.getAttribute("data-leftOffset")?parseFloat(e.getAttribute("data-leftOffset")/n.pageScale):0)),a.setAttribute("data-yoffset",parseFloat(i)-(e.getAttribute("data-topOffset")?parseFloat(e.getAttribute("data-topOffset")/n.pageScale):0)),positionGroup(a),adjustElementDimensions(a,parseFloat(a.getAttribute("data-computedx"))-parseFloat(a.getAttribute("data-width")?a.getAttribute("data-width"):0)/2,parseFloat(a.getAttribute("data-computedy"))-parseFloat(a.getAttribute("data-height")?a.getAttribute("data-height"):0)/2)}else a.setAttribute("data-xoffset",t),a.setAttribute("data-yoffset",i),positionElement(a)}function setupRemainingPropertiesForText(e,t,i,a,n){let l=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[];gameConfig.is_creator_build&&(l=l.filter(e=>"boundingBox"===e.type));let o=l.find(e=>e.guid===t.guid&&"data"===e.type);e.setAttribute("data-guid",t.guid),e.setAttribute("data-oldguid",t.oldguid),e.setAttribute("data-name",t.name),e.setAttribute("data-displayName",t.displayName),e.setAttribute("data-type","element"),e.setAttribute("data-elementType","text");let r=t.opacity/100;a+=" opacity:"+r+";",t.visible?a+=" display:block;":a+=" display: none;",t.scale||(t.scale={x:1,y:1});t.alignment;n||(e.setAttribute("data-x",t.x),e.setAttribute("data-y",t.y),e.setAttribute("data-width",t.wordWrapWidth),e.setAttribute("data-height",t.height)),e.setAttribute("data-scaleX",t.scale.x),e.setAttribute("data-scaleY",t.scale.y),e.setAttribute("data-alpha",r),e.setAttribute("data-visible",t.visible),isFinite(e.getAttribute("data-angle"))||e.setAttribute("data-angle","0"),e.setAttribute("data-originX","0.5"),e.setAttribute("data-originY","0.5"),e.setAttribute("data-position","absolute"),e.style=a,n?i.replaceChild(e,n):i.appendChild(e),positionElement(e),o&&setElementValueFromDataFeature(o,e,"innerText"),allElements[t.guid]=e,elemConfigs[t.guid]=t}function adjustArtboardWidthAndHeight(e){let t=getScaleDetails(),i=e.height*t.pageScale,a=questai.getGroup("Artboards");a&&(a.style.height=i+"px",t.offsetX>0?a.style.width=e.width*t.pageScale+"px":a.style.width="100%")}function setupHowlerAudio(){let e="assets/audio.m4a"+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""),t="assets/audio.ogg"+(gameConfig.cache_version?"?tid="+gameConfig.cache_version:""),i={};for(let e of Object.keys(audioJson.spritemap)){let t=audioJson.spritemap[e];i[e]=[1e3*t.start,1e3*(t.end-t.start)]}audioSprite=new Howl({src:[e,t],sprite:i})}function getDependentActions(e,t){let i={};for(let a of e){let e=t.find(e=>e.id===a);if(e){let t,n=e.startAfter;n&&((t=i[n])?i[n].push(a):i[n]=[a])}}return i}function getAnimeEasing(e){return{Linear:"linear","Quad.easeIn":"easeInQuad","Quad.easeOut":"easeOutQuad","Quad.easeInOut":"easeInOutQuad","Expo.easeIn":"easeInExpo","Expo.easeOut":"easeOutExpo","Expo.easeInOut":"easeInOutExpo","Cubic.easeIn":"easeInCubic","Cubic.easeOut":"easeOutCubic","Cubic.easeInOut":"easeInOutCubic","Quart.easeIn":"easeInQuart","Quart.easeOut":"easeOutQuart","Quart.easeInOut":"easeInOutQuart","Quint.easeIn":"easeInQuint","Quint.easeOut":"easeOutQuint","Quint.easeInOut":"easeInOutQuint","Sine.easeIn":"easeInSine","Sine.easeOut":"easeOutSine","Sine.easeInOut":"easeInOutSine","Circ.easeIn":"easeInCirc","Circ.easeOut":"easeOutCirc","Circ.easeInOut":"easeInOutCirc","Back.easeIn":"easeInBack","Back.easeOut":"easeOutBack","Back.easeInOut":"easeInOutBack","Bounce.easeIn":"easeInBounce","Bounce.easeOut":"easeOutBounce","Bounce.easeInOut":"easeInOutBounce"}[e]}function getRelativeValue(e){let t;return t=(t=e.startsWith("+")||e.startsWith("-")?e:"+"+e).replace(/\+|-/,"$&=")}function getCurrentValue(e,t){let i,a="data-"+e;return i=t.getAttribute(a)}function getRelativeAbsoluteValue(e,t,i){let a=getCurrentValue(t,i);return parseFloat(a)+parseFloat(e)}function getValue(e,t,i,a){let n;return n=t.relative?t.from?[getRelativeAbsoluteValue(e,i,a),getCurrentValue(i,a)]:getRelativeValue(e):t.from?[e,getCurrentValue(i,a)]:e}function getConfigForTween(e,t,i,a,n){let l={};if("tween"===t.type){let i,a=t.config,n=t.config.tweenConfig,o=a.element,r=a.elementType;if(i="element"===r?questai.getElement(o):questai.getGroup(o),l.targets=[i],l.duration=t.duration,n.yoyo&&(l.direction="alternate"),n.repeat){let e=parseInt(n.repeat);-1===e?l.loop=!0:n.yoyo?l.loop=2*e:l.loop=e}if(l.easing=getAnimeEasing(n.ease),a.stopPriorTweens)for(let t of playingTimelines[e].currentTweens)for(let e of t.tween.animatables)e.target===i&&t.tween.pause();null!==n.x&&void 0!==n.x&&(l["data-x"]=getValue(n.x,a,"x",i)),null!==n.y&&void 0!==n.y&&(l["data-y"]=getValue(n.y,a,"y",i)),null!==n.alpha&&void 0!==n.alpha&&(l["data-alpha"]=getValue(n.alpha,a,"alpha",i),l.opacity=getValue(n.alpha,a,"alpha",i)),null!==n.scaleX&&void 0!==n.scaleX&&(l["data-scaleX"]=getValue(n.scaleX,a,"scaleX",i)),null!==n.scaleY&&void 0!==n.scaleY&&(l["data-scaleY"]=getValue(n.scaleY,a,"scaleY",i)),null!==n.angle&&void 0!==n.angle&&(l["data-angle"]=getValue(n.angle,a,"angle",i)),l.update=function(){"element"===r?positionElement(i):positionGroup(i)}}return l.complete=function(){if(adjustGroupAndElementDimensions(),a[t.id])for(let l of a[t.id]){let t=i.find(e=>e.id===l);t&&playAction(e,t,i,a,n)}},l}function playTimeline(e,t,i){gameConfig.is_creator_build&&currentElement&&(previewCurrentElement=currentElement,currentElement=null,redrawCurrentElement()),initPlayingTimelines(e);let a=t.find(t=>t.id===e).actions,n=getDependentActions(a,i);for(let l of a){let a=i.find(e=>e.id===l);a&&!a.startAfter&&playAction(e,a,i,n,t)}}function playAction(e,t,i,a,n){if(t.startAfter||0===t.offset)playActionNow(e,t,i,a,n);else{let l=setTimeout(function(){playActionNow(e,t,i,a,n)},t.offset);playingTimelines[e].delayedCalls.push(l)}}function playActionNow(e,t,i,a,n){"tween"===t.type?playTweenNow(e,t,i,a,n):"playTimeline"===t.type?(t.config.timelineId!==e&&playingTimelines[e].timelines.push(t.config.timelineId),playTimeline(t.config.timelineId,n,i)):"raiseEvent"===t.type?playRaiseEventNow(e,t):"sound"===t.type?playSoundNow(e,t):"setProperty"===t.type&&playSetPropertyNow(e,t)}function addToOriginalProperties(e,t,i,a){playingTimelines[e].originalProperties[t]||(playingTimelines[e].originalProperties[t]={}),playingTimelines[e].originalProperties[t][i]||(playingTimelines[e].originalProperties[t][i]=a)}function playSetPropertyNow(e,t){let i=t.config.element;if(!i)return;let a=questai.getElement(i),n="element";a||(a=questai.getGroup(i),n="group");let l=!1,o=!1;t.config.x&&""!==t.config.x&&(addToOriginalProperties(e,i,"x",a.getAttribute("data-x")),a.setAttribute("data-x",t.config.x),l=!0),t.config.y&&""!==t.config.y&&(addToOriginalProperties(e,i,"y",a.getAttribute("data-y")),a.setAttribute("data-y",t.config.y),l=!0),(0===t.config.alpha||t.config.alpha&&""!==t.config.alpha)&&(addToOriginalProperties(e,i,"alpha",a.getAttribute("data-alpha")),a.setAttribute("data-alpha",t.config.alpha),a.style.opacity=t.config.alpha),t.config.angle&&""!==t.config.angle&&(addToOriginalProperties(e,i,"angle",a.getAttribute("data-angle")),a.setAttribute("data-angle",t.config.angle),l=!0),t.config.scaleX&&""!==t.config.scaleX&&(addToOriginalProperties(e,i,"scaleX",a.getAttribute("data-scaleX")),a.setAttribute("data-scaleX",t.config.scaleX),l=!0),t.config.scaleY&&""!==t.config.scaleY&&(addToOriginalProperties(e,i,"scaleY",a.getAttribute("data-scaleY")),a.setAttribute("data-scaleY",t.config.scaleY),l=!0),!0!==t.config.visible&&!1!==t.config.visible||("block"===a.style.display?addToOriginalProperties(e,i,"visible",!0):addToOriginalProperties(e,i,"visible",!1),!1===t.config.visible?a.style.display="none":a.style.display="block",o=!0),l&&("element"===n?positionElement(a):positionGroup(a)),o&&(setupPointerEventsRecursively(a),adjustGroupAndElementDimensions())}function restoreProperties(e,t){if(!e)return;let i=questai.getElement(e),a="element";i||(i=questai.getGroup(e),a="group");let n=!1,l=!1;t.x&&""!==t.x&&(i.setAttribute("data-x",t.x),n=!0),t.y&&""!==t.y&&(i.setAttribute("data-y",t.y),n=!0),(0===t.alpha||t.alpha&&""!==t.alpha)&&(i.setAttribute("data-alpha",t.alpha),i.style.opacity=t.alpha),t.angle&&""!==t.angle&&(i.setAttribute("data-angle",t.angle),n=!0),t.scaleX&&""!==t.scaleX&&(i.setAttribute("data-scaleX",t.scaleX),n=!0),t.scaleY&&""!==t.scaleY&&(i.setAttribute("data-scaleY",t.scaleY),n=!0),!0!==t.visible&&!1!==t.visible||(!1===t.visible?i.style.display="none":i.style.display="block",l=!0),n&&("element"===a?positionElement(i):positionGroup(i)),l&&(setupPointerEventsRecursively(i),adjustGroupAndElementDimensions())}function playSoundNow(e,t){if(!audioJson)return void console.log("No audio json found!");audioSprite||setupHowlerAudio();let i=t.config.key,a=t.config.loop,n=audioSprite.play(i);audioSprite.loop(a,n),playingTimelines[e].audiosPlaying.push(n)}function playRaiseEventNow(e,t){let i=t.config.eventName;var a=new Event(i);document.dispatchEvent(a)}function playTweenNow(e,t,i,a,n){let l=getConfigForTween(e,t,i,a,n),o=anime(l),r="to";t.config.from&&(r="from"),playingTimelines[e].currentTweens.push({tween:o,type:r})}function stopTimeline(e,t){let i=playingTimelines[e];for(let e of i.previousTimelines.reverse())stopTimeline(e,t);i.previousTimelines=[];for(let e of i.timelines.reverse())stopTimeline(e,t);i.timelines=[];for(let e of i.delayedCalls)clearTimeout(e);i.delayedCalls=[];for(let e of i.currentTweens.reverse())e.tween.pause(),t&&("from"===e.type?e.tween.seek(e.tween.duration):e.tween.seek(0));i.currentTweens=[];for(let e of i.audiosPlaying)audioSprite.stop(e);if(i.audiosPlaying=[],t)for(let e of Object.keys(i.originalProperties)){let t={};for(let a of Object.keys(i.originalProperties[e]))t[a]=i.originalProperties[e][a];restoreProperties(e,t)}i.originalProperties={},previewCurrentElement&&(currentElement=previewCurrentElement,redrawCurrentElement())}function getTimelineDuration(e,t,i,a){if(a>10)return 0;let n=0,l=t.find(t=>t.id===e).actions;for(let e of l){let l=i.find(t=>t.id===e);if(l&&"tween"===l.type){let e=l.duration,t=l.config.tweenConfig.repeat,i=l.config.tweenConfig.yoyo;t&&-1!==parseFloat(t)?e=i?(parseFloat(t)+1)*e*2:(parseFloat(t)+1)*e:i&&(e*=2),(e+=l.offset)>n&&(n=e)}else if(l&&"playTimeline"===l.type){let e=getTimelineDuration(l.config.timelineId,t,i,a+1);l.offset&&(e+=l.offset),e>n&&(n=e)}}return n}function saveOriginalValuesInternal(e){if("group"===e.getAttribute("data-type")){saveOriginalGroupValuesInternal(e);for(let t of e.children)saveOriginalValuesInternal(t)}else saveOriginalElementValuesInternal(e)}function saveOriginalGroupValuesInternal(e){let t,i;for(let a of groupPropertiesToSave)t="data-"+a,i="data-"+a+"-orig",e.setAttribute(i,e.getAttribute(t)?e.getAttribute(t):"")}function saveOriginalElementValuesInternal(e){let t,i;for(let a of elementPropertiesToSave)t="data-"+a,i="data-"+a+"-orig",e.setAttribute(i,e.getAttribute(t)?e.getAttribute(t):"");if("text"===e.getAttribute("data-elementType"))for(let a of textPropertiesToSave)t="data-"+a,i="data-"+a+"-orig",e.setAttribute(i,e.getAttribute(t)?e.getAttribute(t):"")}function createHandle(e){let t=document.createElement("div");return t.style.position="absolute",t.style.border="1px solid #00bff3",t.style.borderRadius="1px",t.style.width=2*e+"px",t.style.height=2*e+"px",t.style.background="#ffffff",questai.getGroup("Artboards").appendChild(t),t}function redrawCurrentElement(){if(!currentElement)return void(currentElementDiv&&(currentElementDiv.style.display="none",currentElementTopDiv.style.display="none",currentElementBottomDiv.style.display="none",currentElementLeftDiv.style.display="none",currentElementRightDiv.style.display="none",currentElementTopLeftDiv.style.display="none",currentElementTopRightDiv.style.display="none",currentElementBottomLeftDiv.style.display="none",currentElementBottomRightDiv.style.display="none"));if(!currentElementDiv){let e=questai.getGroup("Artboards");(currentElementDiv=document.createElement("div")).style.position="absolute",currentElementDiv.style.border="1px solid #00bff3",e.appendChild(currentElementDiv),(currentElementTopDiv=document.createElement("div")).style.position="absolute",currentElementTopDiv.style.borderLeft="1px solid #00bff3",currentElementTopDiv.style.borderRight="1px solid #00bff3",e.appendChild(currentElementTopDiv),(currentElementBottomDiv=document.createElement("div")).style.position="absolute",currentElementBottomDiv.style.borderLeft="1px solid #00bff3",currentElementBottomDiv.style.borderRight="1px solid #00bff3",e.appendChild(currentElementBottomDiv),(currentElementLeftDiv=document.createElement("div")).style.position="absolute",currentElementLeftDiv.style.borderTop="1px solid #00bff3",currentElementLeftDiv.style.borderBottom="1px solid #00bff3",e.appendChild(currentElementLeftDiv),(currentElementRightDiv=document.createElement("div")).style.position="absolute",currentElementRightDiv.style.borderTop="1px solid #00bff3",currentElementRightDiv.style.borderBottom="1px solid #00bff3",e.appendChild(currentElementRightDiv),currentElementTopLeftDiv=createHandle(2),currentElementTopRightDiv=createHandle(2),currentElementBottomLeftDiv=createHandle(2),currentElementBottomRightDiv=createHandle(2)}currentElementDiv.style.display="block",currentElementTopLeftDiv.style.display="block",currentElementTopRightDiv.style.display="block",currentElementBottomLeftDiv.style.display="block",currentElementBottomRightDiv.style.display="block",questai_toolbox.getShiftPressed()?(currentElementTopDiv.style.display="block",currentElementBottomDiv.style.display="block",currentElementLeftDiv.style.display="block",currentElementRightDiv.style.display="block"):(currentElementTopDiv.style.display="none",currentElementBottomDiv.style.display="none",currentElementLeftDiv.style.display="none",currentElementRightDiv.style.display="none");let e=questai.getElement(currentElement);if(e||(e=questai.getGroup(currentElement)),!e)return;let t=e.getBoundingClientRect(),i=window.pageYOffset,a=currentArtboard?gameConfig.artBoards.find(e=>e.name===currentArtboard):gameConfig.artBoards[0],n=getScaleDetails(),l=t.left-n.offsetX;currentElementDiv.style.left=Math.floor(l)+"px",currentElementDiv.style.top=Math.floor(t.top+i)+"px",currentElementDiv.style.width=Math.floor(t.width)+"px",currentElementDiv.style.height=Math.floor(t.height)+"px",currentElementTopLeftDiv.style.left=Math.floor(l-2)+"px",currentElementTopLeftDiv.style.top=Math.floor(t.top+i-2)+"px",currentElementTopRightDiv.style.left=Math.floor(l+t.width-2)+"px",currentElementTopRightDiv.style.top=Math.floor(t.top+i-2)+"px",currentElementBottomLeftDiv.style.left=Math.floor(l-2)+"px",currentElementBottomLeftDiv.style.top=Math.floor(t.top+i+t.height-2)+"px",currentElementBottomRightDiv.style.left=Math.floor(l+t.width-2)+"px",currentElementBottomRightDiv.style.top=Math.floor(t.top+i+t.height-2)+"px",questai_toolbox.getShiftPressed()&&(currentElementTopDiv.style.left=Math.floor(l)+"px",currentElementTopDiv.style.top="0px",currentElementTopDiv.style.width=Math.floor(t.width)+"px",currentElementTopDiv.style.height=Math.floor(t.top+i)+"px",currentElementBottomDiv.style.left=Math.floor(l)+"px",currentElementBottomDiv.style.top=Math.floor(t.top+t.height)+"px",currentElementBottomDiv.style.width=Math.floor(t.width)+"px",currentElementBottomDiv.style.height=Math.floor(a.height-(t.top+t.height))+"px",currentElementLeftDiv.style.left="0px",currentElementLeftDiv.style.top=Math.floor(t.top+i)+"px",currentElementLeftDiv.style.width=Math.floor(l)+"px",currentElementLeftDiv.style.height=Math.floor(t.height)+"px",currentElementRightDiv.style.left=Math.floor(l+t.width)+"px",currentElementRightDiv.style.top=Math.floor(t.top+i)+"px",currentElementRightDiv.style.width=Math.floor(window.innerWidth-(l+t.width))+"px",currentElementRightDiv.style.height=Math.floor(t.height)+"px")}function repositionQuestBranding(){let e=window.innerWidth,t=document.getElementById("__questb_logo");if(t){let i=parseInt(t.getAttribute("data-quest"));e<400?(t.style.width=(e>4.5*i?i:e/4.5)+"px",t.style.bottom="8px",t.style.left="8px"):(t.style.width=(e>5*i?i:e/5)+"px",t.style.bottom="30px",t.style.left="30px")}}function initGA(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,window.ga_debug={trace:!1};let e=window.location.href;var t,i,a,n,l,o;e=e.substr(e.indexOf("/",8)),t=window,i=document,a="script",n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,l=i.createElement(a),o=i.getElementsByTagName(a)[0],l.async=1,l.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(l,o),ga("create",gameConfig.ga_id?gameConfig.ga_id:"UA-57296838-1","auto"),ga("set","page",e),ga("send","pageview")}let publicScope={};async function __updateDynamicData(e,t,i){for(let a=0;a<e.children.length;a++){let n=e.children[a].getAttribute("data-elementtype");if("text"===n){let n=e.children[a].getAttribute("data-name-orig").replace(/\n/g,"");t[i[n]]&&(e.children[a].innerText=t[i[n]],e.children[a].setAttribute("data-text-orig",t[i[n]])),e.children[a].style.background="none"}else if("image"===n){let n=e.children[a].getAttribute("data-name-orig").replace(/\n/g,"");t[i[n]]&&(e.children[a].src=t[i[n]],e.children[a].style.background="none",e.children[a].setAttribute("data-src",t[i[n]]))}}}async function __loadRepeatGridDataSource(e,t,i,a){return new Promise(async function(n,l){let o=t.datasourceId,r=await questai_model.getBatchData(o,0,i*a),s=r&&r.data?r.data:[],u=questai.getGroup(e);for(let e=u.children.length-1,i=0;e>=0;e--,i++)s.length<=i+1?u.children[e].style.display="none":__updateDynamicData(u.children[e],s[i+1],t.mapping);n()})}publicScope.init=function(e,t){console.log("Launching QuestAI Website Engine..."),window.gc_json={},window.ad_config=Object.assign({},e.gameAdConfig),(gameConfig=window.ad_config).overrides=e,initGA(),questai_model.init(gameConfig),questai_model.logAnalytics("Website","Game Load",""),gameConfig.is_creator_build&&questai_toolbox.init(gameConfig),audioJson=t,calculateScaleDetails()},publicScope.loadFontsOld=function(){return new Promise((e,t)=>{if(document.fonts&&document.fonts.load&&gameConfig.fonts&&Object.keys(gameConfig.fonts).length>0){let t=[];for(let e in gameConfig.fonts){let i=gameConfig.fonts[e].weight;if(i){let a=Object.keys(i);for(let i=0;i<a.length;i++)t.push(document.fonts.load("normal normal "+a[i]+' 16pt "'+e.replace(/ /,"")+'"'))}else t.push(document.fonts.load('16pt "'+e.replace(/ /,"")+'"'))}document.fonts.ready.then(function(){console.log("LOADED ALL FONTS")}),Promise.all(t).then(function(){let t=document.querySelector("#websitediv"),i=document.createElement("div");for(var a in i.setAttribute("id","all_fonts_div"),t.appendChild(i),gameConfig.fonts){let e=gameConfig.fonts[a].weight;if(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let n=t[e],l=document.createElement("div");l.setAttribute("style",`position: absolute; opacity:0.02; left: 0px;top: 0px;color:black;font-family: "${a}"; font-weight:${n};`),l.innerHTML="Loading fonts..",i.appendChild(l)}}else{let e=document.createElement("div");e.setAttribute("style",`position: absolute; opacity:0.02; left: 0px;top: 0px;color:black;font-family: "${a}"`),e.innerHTML="Loading fonts..",i.appendChild(e)}}setTimeout(function(){let t=document.querySelector("#websitediv"),i=document.querySelector("#all_fonts_div");t.removeChild(i),e("success")},500)}).catch(function(t){gameConfig.font_load_failed=!0,console.log("Failed to load the fonts. Using default."),console.log(t),e("success")})}else e("success")})},publicScope.getGroup=function(e){return allGroups[e]},publicScope.getGroupsByName=function(e){return Object.values(allGroups).filter(t=>t.getAttribute("data-name")===e)},publicScope.getFontsFailed=function(){return gameConfig.fontsFailed},publicScope.getFontsLoaded=function(){return gameConfig.fontsLoaded},publicScope.getElement=function(e){return allElements[e]},publicScope.getComponents=function(){return gameConfig.overrides?gameConfig.overrides.components:[]},publicScope.loadFonts=function(){return gameConfig.fontAlternateNames={},gameConfig.fontsLoaded={},gameConfig.fontsFailed={},new Promise((e,t)=>{if(document.fonts&&document.fonts.load&&gameConfig.fonts&&Object.keys(gameConfig.fonts).length>0){let t=[];for(let e in gameConfig.fonts){let i=null,a=gameConfig.fonts[e],n=a.weight;if("google"!==a.type&&(i=e.trim().toLowerCase().replace(/ /g,"-"),gameConfig.fontAlternateNames[e]={name:i,loaded:!1}),n){let a=Object.keys(n),l="";for(let e=0;e<a.length;e++)""!==l&&(l+=","),l+="n"+parseInt(a[e]/100);t.push(e+":"+l),i&&t.push(i+":"+l)}else t.push(e),i&&t.push(i+":"+fv4)}WebFontConfig={custom:{families:t},active:function(t){for(let e in gameConfig.fontAlternateNames)!1===gameConfig.fontAlternateNames[e].loaded&&delete gameConfig.fontAlternateNames[e];console.log("loaded fonts"),e("success")},inactive:function(t){console.log("Failed to load fonts"),e("success")},fontactive:function(e,t){console.log("Loaded font: "+e+" : "+t),gameConfig.fontsLoaded[e]=!0,gameConfig.fontsLoaded[e+", sans-serif"]=!0;for(let t in gameConfig.fontAlternateNames){gameConfig.fontAlternateNames[t].name===e&&(gameConfig.fontAlternateNames[t].loaded=!0,gameConfig.fontsLoaded[t]=!0,gameConfig.fontsLoaded[t+", sans-serif"]=!0)}},fontinactive:function(e,t){console.log("Failed font load: "+e+" : "+t),gameConfig.fontAlternateNames[e]&&!1===gameConfig.fontAlternateNames[e].loaded&&(gameConfig.fontsFailed[e]=t)},classes:!1,timeout:gameConfig.is_creator_build?1e3:600},WebFont.load(WebFontConfig)}else e("success")})},publicScope.getElementsByName=function(e){return Object.values(allElements).filter(t=>t.getAttribute("data-name")===e)},publicScope.scalePageInitial=function(){let e,t=questai.getGroup("Artboards");t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.padding="0px",t.style.margin="0px",t.style.overflow="hidden",(e=gameConfig.is_creator_build?gameConfig.artBoards[0]:getArtboardBasedOnWidth())&&(setArtboard(e.name),calculateScaleDetails(),adjustArtboardWidthAndHeight(e),adjustGroupAndElementDimensions())},publicScope.scalePageResize=function(){questai.setupParallaxScrolling();let e,t=document.querySelector("#websitediv");for(let e of t.children)rescaleElement(e);if(repositionQuestBranding(),gameConfig.is_creator_build)e=currentArtboard?gameConfig.artBoards.find(e=>e.name===currentArtboard):gameConfig.artBoards[0];else{if(!(e=getArtboardBasedOnWidth()))return;questai.getGroup("Artboards")&&setArtboard(e.name)}e&&(calculateScaleDetails(),adjustArtboardWidthAndHeight(e),adjustGroupAndElementDimensions(),redrawCurrentElement())},publicScope.addGroup=function(e){let t;t=e.parent?questai.getGroup(e.parent):document.querySelector("#websitediv");let i=!1;if(e.isRepeatGrid){let t=(gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[]).find(t=>t.guid===e.guid&&"dynamic"===t.type),a=[];if(t&&t.dynamicData)try{let n=JSON.parse(t.dynamicData);i=!0,a=Object.keys(n.mapping),__internalDynamicFields=Object.assign(__internalDynamicFields,n.mapping),__loadRepeatGridDataSource(e.guid,n,e.numColsInGrid,e.numRowsInGrid)}catch(e){console.log("Failed to render dynamic data"),console.log(e)}}let a=document.createElement("div");a.id="q"+idIndex,idIndex++,a.setAttribute("data-guid",e.guid),a.setAttribute("data-oldguid",e.oldguid),a.setAttribute("data-name",e.name),a.setAttribute("data-displayName",e.displayName),a.setAttribute("data-df",i),a.setAttribute("data-originalDisplayName",e.originalDisplayName),a.setAttribute("data-type","group"),a.setAttribute("data-x",e.x),a.setAttribute("data-y",e.y),a.setAttribute("data-computedx",0),a.setAttribute("data-computedy",0),a.setAttribute("data-scaleX",1),a.setAttribute("data-scaleY",1),a.setAttribute("data-alpha",1),a.setAttribute("data-visible",e.visible),a.setAttribute("data-angle","0"),a.setAttribute("data-originX","0.5"),a.setAttribute("data-originY","0.5"),a.setAttribute("data-position","absolute");let n=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[],l=n.filter(t=>t.guid===e.guid&&"click"===t.type),o=n.find(t=>t.guid===e.guid&&"mouseOver"===t.type),r=n.find(t=>t.guid===e.guid&&"noScaling"===t.type),s=n.find(t=>t.guid===e.guid&&"cssOverride"===t.type);r&&a.setAttribute("data-ns",!0),s&&a.setAttribute("data-co",s.cssOverride);let u="";gameConfig.is_creator_build?u="cursor:default;":(l.length>0||o)&&(u="cursor:pointer; "),e.visible?u+=" display:block;":u+=" display: none;",e.bgColor&&(u+="background: #"+e.bgColor),gameConfig.is_creator_build&&(u+="touch-action: none; user-select: none; -webkit-user-select:none;"),gameConfig.is_creator_build&&(n=n.filter(e=>"boundingBox"===e.type));let d=n.find(t=>t.guid===e.guid&&"boundingBox"===t.type);if(d){let e=getScaleDetails();a.setAttribute("data-topOffset",d.topOffset*e.pageScale),a.setAttribute("data-rightOffset",d.rightOffset*e.pageScale),a.setAttribute("data-bottomOffset",d.bottomOffset*e.pageScale),a.setAttribute("data-leftOffset",d.leftOffset*e.pageScale),u+="padding: "+d.topOffset*e.pageScale+"px "+d.rightOffset*e.pageScale+"px "+d.bottomOffset*e.pageScale+"px "+d.leftOffset*e.pageScale+"px;"}return a.style=u,t.appendChild(a),positionGroup(a),allGroups[e.guid]=a,groupConfigs[e.guid]=e,a},publicScope.addElement=function(e){let t;t=e.groupGuid?questai.getGroup(e.groupGuid):document.querySelector("#websitediv");let i=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[];gameConfig.is_creator_build&&(i=i.filter(e=>"boundingBox"===e.type));let a,n=i.filter(t=>t.guid===e.guid&&"click"===t.type),l=i.find(t=>t.guid===e.guid&&"mouseOver"===t.type),o=i.find(t=>t.guid===e.guid&&"data"===t.type),r=i.find(t=>t.guid===e.guid&&"video"===t.type),s=i.find(t=>t.guid===e.guid&&"iframe"===t.type),u=i.find(t=>t.guid===e.guid&&"dynamic"===t.type),d=i.find(t=>t.guid===e.guid&&"snippet"===t.type),g=i.find(t=>t.guid===e.guid&&"boundingBox"===t.type),c=i.find(t=>t.guid===e.guid&&"altText"===t.type),p=i.find(t=>t.guid===e.guid&&"noScaling"===t.type),f=i.find(t=>t.guid===e.guid&&"cssOverride"===t.type);(a=r?setupVideoElement(e,r):s?setupIFrameElement(e,s):u||d?setupDynamicImageElement(e,c):setupImageElement(e,c)).id="q"+idIndex,idIndex++;let m="";if(gameConfig.is_creator_build?m="cursor:default;":(n.length>0||l)&&(m=u||d?"cursor: default; ":"cursor:pointer; "),gameConfig.is_creator_build&&(m+="touch-action: none; user-select: none; -webkit-user-select:none;"),p&&a.setAttribute("data-ns",!0),f&&a.setAttribute("data-co",f.cssOverride),g){getScaleDetails();a.setAttribute("data-topOffset",g.topOffset),a.setAttribute("data-rightOffset",g.rightOffset),a.setAttribute("data-bottomOffset",g.bottomOffset),a.setAttribute("data-leftOffset",g.leftOffset),m+="padding: "+g.topOffset+"px "+g.rightOffset+"px "+g.bottomOffset+"px "+g.leftOffset+"px;"}s&&(m+="border: 0;"),a.setAttribute("data-guid",e.guid),a.setAttribute("data-oldguid",e.oldguid),a.setAttribute("data-name",e.name),a.setAttribute("data-displayName",e.displayName),a.setAttribute("data-type","element");let b=e.opacity/100;return m+=" opacity:"+b+";",e.visible?m+=" display:block;":m+=" display: none;",e.scale||(e.scale={x:1,y:1}),a.setAttribute("data-x",e.x),a.setAttribute("data-y",e.y),a.setAttribute("data-width",e.w),a.setAttribute("data-height",e.h),a.setAttribute("data-scaleX",e.scale.x),a.setAttribute("data-scaleY",e.scale.y),a.setAttribute("data-alpha",b),a.setAttribute("data-visible",e.visible),a.setAttribute("data-angle","0"),a.setAttribute("data-originX","0.5"),a.setAttribute("data-originY","0.5"),a.setAttribute("data-position","absolute"),a.style=m,t.parentNode&&"true"===t.parentNode.getAttribute("data-df")&&(__internalDynamicFields[e.name]?(a.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzcyOC4zNzEiIGhlaWdodD0iMTk5OS45ODciIHZpZXdCb3g9IjAgMCA2MDQgMzI0Ij4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiB1cmwoI2xpbmVhci1ncmFkaWVudCk7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjEwMDAiIHkxPSIyMDAwIiB4Mj0iMTAwMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNlNGU0ZTQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZjVmM2YzIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8cmVjdCBpZD0iaW1hZ2VfbG9hZCIgY2xhc3M9ImNscy0xIiB3aWR0aD0iMjAwMCIgaGVpZ2h0PSIyMDAwIi8+Cjwvc3ZnPgo=",a.removeAttribute("data-src")):console.log("Element is NOT in mapping. "+e.name)),t.appendChild(a),positionElement(a),o&&setElementValueFromDataFeature(o,a,"src"),d&&processHTMLSnippet(e,d,a),allElements[e.guid]=a,elemConfigs[e.guid]=e,a};let getValidFontFamily=function(e){return gameConfig.fontAlternateNames[e]?gameConfig.fontAlternateNames[e].name:e};return publicScope.addTextElement=function(e){let t;t=e.groupGuid?questai.getGroup(e.groupGuid):document.querySelector("#websitediv");let i=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[];gameConfig.is_creator_build&&(i=i.filter(e=>"boundingBox"===e.type));let a=i.filter(t=>t.guid===e.guid&&"click"===t.type),n=i.find(t=>t.guid===e.guid&&"noScaling"===t.type),l=i.find(t=>t.guid===e.guid&&"cssOverride"===t.type),o=!1,r=[];if(a.length>0){o=!0;for(let e of a)"ALL"!==e.textPortion&&(o=!1,r.push(parseInt(e.textPortion)))}let s,u,d=i.find(t=>t.guid===e.guid&&"mouseOver"===t.type),g=i.find(t=>t.guid===e.guid&&"data"===t.type),c=i.find(t=>t.guid===e.guid&&"boundingBox"===t.type),p=getLocalizedText(e.guid,e.text);if(p)switch(e.textTransform){case"uppercase":p=p.toLocaleUpperCase();break;case"lowercase":p=p.toLocaleLowerCase();break;case"titlecase":let t=p.split(" ");t.forEach((e,t,i)=>{i[t]=e?e.charAt(0).toLocaleUpperCase()+e.substring(1):e}),p=t.join(" ")}s=gameConfig.is_creator_build?document.createElement("div"):o?document.createElement("a"):document.createElement("div"),l&&s.setAttribute("data-co",l.cssOverride),n&&s.setAttribute("data-ns",!0),u=gameConfig.is_creator_build?"cursor:default;":o?"cursor:pointer; text-decoration: none; ":d?"cursor:pointer;":"cursor:text;",u+="white-space: pre-wrap;",s.id="q"+idIndex,idIndex++,e.color&&(u+="color: #"+e.color+";"),e.alignment&&(u+="text-align: "+("justified"===e.alignment?"justify":e.alignment)+";"),c&&(s.setAttribute("data-topOffset",c.topOffset),s.setAttribute("data-rightOffset",c.rightOffset),s.setAttribute("data-bottomOffset",c.bottomOffset),s.setAttribute("data-leftOffset",c.leftOffset),u+="padding: "+c.topOffset+"px "+c.rightOffset+"px "+c.bottomOffset+"px "+c.leftOffset+"px;");let f="";if(e.fontSize){let t=getValidFontFamily(e.fontFamily)+", sans-serif";s.setAttribute("data-fontFamily",e.fontFamily),s.setAttribute("data-fontWeight",e.fontWeight),s.setAttribute("data-fontSize",e.fontSize+"px"),u+="font-style: normal; font-weight:"+e.fontWeight+"; font-family: "+t+"; font-size:"+e.fontSize+"px ;",f=e.fontWeight+" "+e.fontSize+'px "'+t+'" '}let m=parseFloat(e.wordWrapWidth)+1,b=!1,h=document.querySelector("#websitediv");sizingTextDiv||((sizingTextDiv=document.createElement("div")).style.position="absolute");let y=0;if(p){sizingTextDiv.style.fontFamily=getValidFontFamily(e.fontFamily)+", sans-serif",sizingTextDiv.style.fontSize=e.fontSize+"px",sizingTextDiv.style.fontWeight=e.fontWeight,sizingTextDiv.style.letterSpacing=parseFloat(e.letterSpacing)>-100?e.letterSpacing+"px":null,sizingTextDiv.style.position="absolute",sizingTextDiv.style.whiteSpace="nowrap";let t=p,i=null;if(e.lines&&e.lines.length>0&&(i=JSON.parse(atob(e.lines))),i&&i.length>0){(e.allowMultiLine||i.length>1)&&(b=!0),h.appendChild(sizingTextDiv);let t=0;for(let a=0;a<i.length;a++){let n=i[a],l=(new DOMParser).parseFromString("<!doctype html><body>"+n,"text/html").body.textContent;sizingTextDiv.innerText=l;let o=sizingTextDiv.getBoundingClientRect();o.width>t&&(t=Math.ceil(o.width+1)),o.height>y&&o.height<1.7*e.fontSize&&(y=o.height)}h.removeChild(sizingTextDiv),(t=parseInt(Math.ceil(t+1)))>m&&(e.fuzzyWidth=t,e.originalWidth=m,s.setAttribute("data-fw",t))}else{let i=t.split("\n");b=i.length>1,sizingTextDiv.style.font=f,h.appendChild(sizingTextDiv);let a=0;if(i.length>1)for(let e=0;e<i.length;e++){sizingTextDiv.innerText=i[e];let t=sizingTextDiv.getBoundingClientRect();t.height>y&&(y=t.height);let n=parseInt(Math.ceil(t.width+1));0==e?a=n:n>a&&(a=n)}else{sizingTextDiv.innerText=t;let e=sizingTextDiv.getBoundingClientRect();y=e.height,a=parseInt(Math.ceil(e.width+1))}h.removeChild(sizingTextDiv),a>m&&a<m+10&&(e.fuzzyWidth=a,e.originalWidth=m,s.setAttribute("data-fw",a))}}if(e.wordWrapWidth){u+="width: "+m+"px;"}return e.height&&(u+="height: "+e.height+"px;"),null!==e.letterSpacing&&0!==e.letterSpacing&&(u+="letter-spacing: "+e.letterSpacing+"px;",s.setAttribute("data-letterSpacing",e.letterSpacing+"px")),e.opacity>=0&&(u+=" opacity: "+e.opacity/100+" ;"),!e.underline||e.styleRanges&&e.styleRanges.length>0||(u+=" text-decoration: underline; "),!e.strikethrough||e.styleRanges&&e.styleRanges.length>0||(u+=" text-decoration: line-through; "),e.paragraphIndent&&(u+=" text-indent: "+e.paragraphIndent+"px ; "),b&&s.setAttribute("data-hm","true"),null!==e.lineHeightPx&&void 0!==e.lineHeightPx&&0!==e.lineHeightPx?e.lineHeightPx<e.height?(s.setAttribute("data-lineHeight",e.lineHeightPx+"px"),u+="line-height: "+e.lineHeightPx+"px;"):(s.setAttribute("data-lineHeight",e.height+"px"),u+="line-height: "+e.height+"px;"):e.height<=e.fontSize?(s.setAttribute("data-lineHeight",.9*e.fontSize+"px"),u+="line-height: "+.9*e.fontSize+"px;"):b&&(s.setAttribute("data-lineHeight",1.2*e.fontSize+"px"),u+="line-height: "+1.2*e.fontSize+"px;"),s.setAttribute("data-ch",y),e.angle&&s.setAttribute("data-angle",e.angle),gameConfig.is_creator_build&&(u+="touch-action: none; user-select: none; -webkit-user-select:none;"),g?(s.innerText=p,s.setAttribute("data-text",p)):e.styleRanges&&e.styleRanges.length>0?constructMultiStyleText(s,e,r):(s.innerText=p,s.setAttribute("data-text",p)),"true"===t.parentNode.getAttribute("data-df")&&(e.name&&__internalDynamicFields[e.name.replace(/\n/g,"")]?(u+="background:linear-gradient(90deg, rgb(228,228,228) 0%, rgb(245,243,243) 99%);",s.innerText=""):console.log("Element does NOT participate in dynamic mapping. "+e.name)),setupRemainingPropertiesForText(s,e,t,u,null),s},publicScope.setBackgroundColor=function(e){document.body.style.background="#"+e;let t=questai.getGroup("Artboards");t&&(t.style.background="#"+e)},publicScope.getAllElements=function(){return allElements},publicScope.applyPropertiesForEvent=function(e){let t=e.gameOverride,i=e.clearOverrides;questai.applyProperties(t,i)},publicScope.applyPropertiesOnLoad=function(){if(window.location.search&&window.location.search.indexOf("lang=")>0){let e=window.location.search.indexOf("lang=");questai.localLang=window.location.search.substr(e+5)}gameConfig.overrides&&gameConfig.overrides.gameOverride&&questai.applyProperties(gameConfig.overrides.gameOverride.Artboards,null)},publicScope.saveOriginalValues=function(){let e=questai.getGroup("Artboards");for(ab of e.children)saveOriginalValuesInternal(ab)},publicScope.applyProperties=function(e,t){let i,a,n=Object.keys(e);for(let l=0;l<n.length;l++){i=n[l],a=questai.getElement(i),t&&a.setAttribute("data-widthchanged","false");let o=e[i],r=Object.keys(o);if(a){let e;for(let n=0;n<r.length;n++)if("x"===(e=r[n]))a.setAttribute("data-x",o[e]),positionElement(a);else if("y"===e)a.setAttribute("data-y",o[e]),positionElement(a);else if("alpha"===e)a.setAttribute("data-alpha",o[e]),a.style.opacity=o[e];else if("angle"===e)a.setAttribute("data-angle",o[e]),positionElement(a);else if("scale"===e)a.setAttribute("data-scaleX",o[e]),a.setAttribute("data-scaleY",o[e]),positionElement(a);else if("scaleX"===e)a.setAttribute("data-scaleX",o[e]),positionElement(a);else if("scaleY"===e)a.setAttribute("data-scaleY",o[e]),positionElement(a);else if("name"===e)a.setAttribute("data-name",o[e]);else if("originX"===e);else if("originY"===e);else if("visible"===e)a.setAttribute("data-visible",o[e]),"false"===o[e]||!1===o[e]?a.style.display="none":a.style.display="block",setupPointerEventsRecursively(a),adjustGroupAndElementDimensions();else if("text"===e)if("input"===a.tagName.toLowerCase())a.placeholder=getLocalizedText(i,o[e]);else{let t=elemConfigs[a.getAttribute("data-guid")];(!t.styleRanges||t.styleRanges.length<=0)&&(a.innerText=getLocalizedText(i,o[e]),a.setAttribute("data-text",o[e]))}else if("fontSize"===e)a.setAttribute("data-fontSize",o[e]),a.style.fontSize=o[e],adjustWidthBasedOnOverride(a);else if("fontFamily"===e){let t=o[e],i=t;t.indexOf(",")>0&&(t=t.substring(0,t.indexOf(","))),t=getValidFontFamily(t)+", sans-serif",a.setAttribute("data-fontFamily",i),a.style.fontFamily=t,adjustWidthBasedOnOverride(a)}else if("fontWeight"===e){let t=o[e]?o[e].toString():"",i="normal";t.includes("italic")&&(i="italic",""===(t=t.replace("italic",""))&&(t="400")),t.includes("regular")&&(i="normal",""===(t=t.replace("regular",""))&&(t="400")),t.includes("bold")&&(i="bold",""===(t=t.replace("bold",""))&&(t="400")),a.style.fontWeight=t,a.style.fontStyle=i,a.setAttribute("data-fontWeight",t),adjustWidthBasedOnOverride(a)}else if("wordWrapWidth"===e){let i=o[e];i.endsWith("px")&&(i=i.substring(0,i.length-2)),a.setAttribute("data-width",i),a.style.width=i+"px",a.setAttribute("data-widthchanged",t?"false":"true"),adjustWidthBasedOnOverride(a)}else"lineHeight"===e?(a.setAttribute("data-lineHeight",o[e]),a.style.lineHeight=o[e],adjustWidthBasedOnOverride(a)):"letterSpacing"===e?(a.setAttribute("data-letterSpacing",o[e]),a.style.letterSpacing=o[e],adjustWidthBasedOnOverride(a)):"fixed"===e?gameConfig.is_creator_build||(o[e]?a.setAttribute("data-position","fixed"):a.setAttribute("data-position","absolute"),positionElement(a)):"leftOffset"===e?(a.style.paddingLeft=o[e]+"px",a.setAttribute("data-leftOffset",o[e]),adjustGroupAndElementDimensions()):"bottomOffset"===e?(a.style.paddingBottom=o[e]+"px",a.setAttribute("data-bottomOffset",o[e]),adjustGroupAndElementDimensions()):"rightOffset"===e?(a.style.paddingRight=o[e]+"px",a.setAttribute("data-rightOffset",o[e]),adjustGroupAndElementDimensions()):"topOffset"===e?(a.style.paddingTop=o[e]+"px",a.setAttribute("data-topOffset",o[e]),adjustGroupAndElementDimensions()):console.log("Not a valid property: "+e)}else{let e=questai.getGroup(i),t=!1,a=gameConfig.artBoards;if(e&&a&&a.length>0&&a.find(t=>t.name===e.getAttribute("data-name"))&&(t=!0),e&&!t){let t;for(let i=0;i<r.length;i++)if("x"===(t=r[i]))e.setAttribute("data-x",o[t]),positionGroup(e);else if("y"===t)e.setAttribute("data-y",o[t]),positionGroup(e);else if("alpha"===t)e.setAttribute("data-alpha",o[t]),e.style.opacity=o[t];else if("angle"===t)e.setAttribute("data-angle",o[t]),positionGroup(e);else if("scale"===t)e.setAttribute("data-scaleX",o[t]),e.setAttribute("data-scaleY",o[t]),positionGroup(e);else if("scaleX"===t)e.setAttribute("data-scaleX",o[t]),positionGroup(e);else if("scaleY"===t)e.setAttribute("data-scaleY",o[t]),positionGroup(e);else if("name"===t)e.setAttribute("data-name",o[t]);else if("originX"===t);else if("originY"===t);else if("visible"===t)"false"===o[t]||!1===o[t]?e.style.display="none":e.style.display="block",setupPointerEventsRecursively(e),adjustGroupAndElementDimensions();else if("fixed"===t)gameConfig.is_creator_build||(o[t]?e.setAttribute("data-position","fixed"):e.setAttribute("data-position","absolute"),positionGroup(e));else if("leftOffset"===t){let i=getScaleDetails();e.style.paddingLeft=o[t]*i.pageScale+"px",e.setAttribute("data-leftOffset",o[t]*i.pageScale),adjustGroupAndElementDimensions()}else if("bottomOffset"===t){let i=getScaleDetails();e.style.paddingBottom=o[t]*i.pageScale+"px",e.setAttribute("data-bottomOffset",o[t]*i.pageScale),adjustGroupAndElementDimensions()}else if("rightOffset"===t){let i=getScaleDetails();e.style.paddingRight=o[t]*i.pageScale+"px",e.setAttribute("data-rightOffset",o[t]*i.pageScale),adjustGroupAndElementDimensions()}else if("topOffset"===t){let i=getScaleDetails();e.style.paddingTop=o[t]*i.pageScale+"px",e.setAttribute("data-topOffset",o[t]*i.pageScale),adjustGroupAndElementDimensions()}}}}redrawCurrentElement()},publicScope.handleExternalLink=function(e,t,i){questai_model.logAnalytics("Website",t,e),i?window.open(e,"_blank"):window.open(e,"_self")},publicScope.saveCMSData=function(e,t){let i=(gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[]).filter(e=>"input"===e.type),a={};for(let e of i){let i=e.fieldName;if(!t||t.includes(i)){let e=getInputValue(i);a[i]=e}}questai_model.saveData(e,a)},publicScope.setCurrentElement=function(e){currentElement=e,redrawCurrentElement()},publicScope.setCurrentElementForEvent=function(e){questai.setCurrentElement(e.detail.guid)},initPlayingTimelines=function(e){playingTimelines[e]||(playingTimelines[e]={},playingTimelines[e].delayedCalls=[],playingTimelines[e].currentTweens=[],playingTimelines[e].originalProperties={},playingTimelines[e].audiosPlaying=[],playingTimelines[e].timelines=[],playingTimelines[e].previousTimelines=[])},publicScope.previewEventTimeline=function(e){let t=e.detail.eventId,i=e.detail.eventTimelines,a=e.detail.actions,n=i.find(e=>e.id===t);initPlayingTimelines(t);let l,o=n.previousEventForPreview,r=[t];for(;o&&null!==o;)r.push(o),playingTimelines[t].previousTimelines.push(o),l=i.find(e=>e.id===o),o=l.previousEventForPreview;let s=0;for(let e=r.length-1;e>=0;e--){if(0===s)playTimeline(r[e],i,a);else{let n=setTimeout(function(){playTimeline(r[e],i,a)},s);playingTimelines[t].delayedCalls.push(n)}s+=getTimelineDuration(r[e],i,a,0)}},publicScope.stopPreviewEventTimeline=function(e){stopTimeline(e.detail.eventId,!0)},publicScope.setupParallaxScrolling=function(){if(gameConfig.is_creator_build)return;let e=(gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[]).filter(e=>"parallaxScroll"===e.type);parallaxScrollElements=[];for(let t of e){let e=t.guid,i=questai.getElement(e),a="element";i||(i=questai.getGroup(e),a="group"),i&&initParallaxScrollForDiv(i,t,a)}},initParallaxScrollForDiv=function(e,t,i){let a=t.relativeSpeed,n=e.getBoundingClientRect().top,l=e.clientHeight||e.offsetHeight||e.scrollHeight,o=window.innerHeight,r=a*(100*(1-(0-n+o)/(l+o)));parallaxScrollElements.push({div:e,guid:e.getAttribute("data-guid"),elementType:i,top:n,height:l,screenY:o,baseY:r,speed:a})},getScrollTransformForDiv=function(e){let t=e.getAttribute("data-guid"),i=parallaxScrollElements.find(e=>e.guid===t),a=0;if(i){let e=(((document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset)-i.top+i.screenY)/(i.height+i.screenY),t=i.speed*(100*(1-e));a=Math.round(100*t)/100-i.baseY}return a},publicScope.setupPageLoadTimelines=function(){if(gameConfig.is_creator_build)return;let e=gameConfig.overrides;if(!e)return;let t=e.eventTimelines,i=e.actions,a=(e.features||[]).filter(e=>"onPageLoad"===e.type);for(let e of a){let a=gameConfig.overrides&&gameConfig.overrides.featureActions?gameConfig.overrides.featureActions:[];if(!a||0===a.length)continue;let n=e.actions,l=a.filter(e=>n.includes(e.id));for(let e of l){playTimeline(t.find(t=>t.id===e.timeline).id,t,i)}}},publicScope.customPageLoad=function(){let components=gameConfig.overrides.components;if(components&&components.length>0){let pageComps=components.filter(e=>"page"===e.type);if(pageComps)for(let comp of pageComps){let customNSName="questai_custom_"+comp.projectId,evalStr=customNSName+".pageload()";try{eval(evalStr)}catch(e){console.log("Failed to evaluate components page load with id: "+comp.projectId),console.log(e)}}}questai_custom.pageload()},publicScope.playTimeline=function(e){let t=gameConfig.overrides;if(!t)return;let i=t.eventTimelines||[],a=t.actions,n=i.find(t=>t.name===e);n&&playTimeline(n.id,i,a)},publicScope.stopTimeline=function(e,t){let i=gameConfig.overrides;if(!i)return;let a=(i.eventTimelines||[]).find(t=>t.name===e);a&&stopTimeline(a.id,t)},publicScope.changeArtboardForEvent=function(e){setArtboard(e.detail.artBoard),calculateScaleDetails(),questai.scalePageResize()},publicScope.setupAudio=function(){audioJson&&setupHowlerAudio()},publicScope.getCurrentElementDiv=function(){return questai.getElement(currentElement)},publicScope.moveCurrentElement=function(e,t){let i=getScaleDetails(),a=questai.getElement(currentElement);a.setAttribute("data-x",parseInt(parseFloat(a.getAttribute("data-x"))+e/i.pageScale)),a.setAttribute("data-y",parseInt(parseFloat(a.getAttribute("data-y"))+t/i.pageScale)),positionElement(a),redrawCurrentElement()},publicScope.scaleCurrentElement=function(e,t,i,a){let n=getScaleDetails(),l=questai.getElement(currentElement);l.setAttribute("data-scaleX",parseFloat(l.getAttribute("data-scaleX"))+e/n.pageScale),l.setAttribute("data-scaleY",parseFloat(l.getAttribute("data-scaleY"))+t/n.pageScale),l.setAttribute("data-x",parseFloat(l.getAttribute("data-x"))+i/(2*n.pageScale)),l.setAttribute("data-y",parseFloat(l.getAttribute("data-y"))+a/(2*n.pageScale)),positionElement(l),redrawCurrentElement()},publicScope.redrawCurrentElementForToolbox=function(){redrawCurrentElement()},publicScope.changeGuidForEvent=function(e){changeGuid(e.detail.oldguid,e.detail.newguid,e.detail.type)},publicScope.reloadDynamicData=function(e){__loadRepeatGridDataSource(e.detail.groupGuid,e.detail.datamapping,e.detail.cols,e.detail.rows)},publicScope.getInputValue=function(e){return getInputValue(e)},publicScope.addScrollEventsIfNecessary=function(){if(gameConfig.is_creator_build)return;let e=(gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[]).filter(e=>"scrollTrigger"===e.type);e&&e.length>0&&window.addEventListener("scroll",function(e){questai.handleScrollTriggers()}),parallaxScrollElements&&parallaxScrollElements.length>0&&window.addEventListener("scroll",function(e){questai.handleParallaxScroll()})},publicScope.handleScrollTriggers=function(){let e=gameConfig.overrides&&gameConfig.overrides.features?gameConfig.overrides.features:[],t=gameConfig.overrides&&gameConfig.overrides.featureActions?gameConfig.overrides.featureActions:[],i=e.filter(e=>"scrollTrigger"===e.type),a=e.filter(e=>"scrollOffTrigger"===e.type);for(let e of i){let i=e.guid,n=e.position,l=window.innerHeight,o=questai.getElement(i);if(o||(o=questai.getGroup(i)),!o)continue;let r=o.getBoundingClientRect(),s=scrollTriggersFired.filter(e=>e.guid===i);if((!s||s.length<=0)&&r.top>0&&r.top+n<l&&(scrollTriggersFired.push({guid:i,featureId:e.id}),fireScrollOffTriggers.push(i),handleFeatureActions(o,e,"scrollTrigger",e.actions,t)),s&&s.length>0&&(r.top>l||r.top+r.height<0)){e.playOnce||(scrollTriggersFired=scrollTriggersFired.filter(e=>e.guid!==i));let n=a.find(e=>e.guid===i);fireScrollOffTriggers.find(e=>e===i)&&n&&(fireScrollOffTriggers=fireScrollOffTriggers.filter(e=>e!==i),handleFeatureActions(o,n,"scrollOffTrigger",n.actions,t))}}},publicScope.handleParallaxScroll=function(){for(let e of parallaxScrollElements)"element"===e.elementType?positionElement(e.div):positionGroup(e.div)},publicScope};