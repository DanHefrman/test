<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>30-ruby-generate-date-range</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p><a href="//1.bp.blogspot.com/-m99_zzl37V4/ULhdndEerbI/AAAAAAAAJpk/_ddENqvhXvI/s1600/date-range.png"><img src="//1.bp.blogspot.com/-m99_zzl37V4/ULhdndEerbI/AAAAAAAAJpk/_ddENqvhXvI/s400/date-range.png" width="400" height="77" /></a></p>
<p>    This is a simple post just to demonstrate how to get all the valid dates in between two given dates. Consider the situation that you have to loop through each date between<strong><span style="color: #e06666;"> 2012-10-27</span></strong> and<strong><span style="color: #e06666;"> 2012-11-03</span></strong>. Please find below the code which I used to achieve this.</p>
<pre><code>require &quot;active_support/time&quot;
#
# Check the given date is valid or not
# @param  dt [String] [Date]
#
# @return [Boolean]
def valid_date?(dt)
  begin
    Date.parse(dt)
    true
  rescue =&gt; e
    false
  end
end


#
# Compute the first and last dates according to the params.
#
# @param  first [String] [First date]
# @param  last [String] [Last date]
#
# @return [Array] [Array include first and last date]
def generate_date_range(first, last)
  first, last = &quot;&quot;, first unless last
  if last.nil? || last.empty?
    last = (Time.now - 1.day).in_time_zone(&#39;Kolkata&#39;).strftime(&quot;%Y-%m-%d&quot;)
  end
  if first.empty?
    first = Time.strptime(last, &quot;%Y-%m-%d&quot;).in_time_zone(&#39;Kolkata&#39;).beginning_of_month.strftime(&quot;%Y-%m-%d&quot;)
  end
  (first..last).select { |d|  valid_date?(d) }
end

p generate_date_range(&quot;2012-10-27&quot;,  &quot;2012-11-03&quot;)</code></pre>
<p><strong>Output :</strong></p>
<pre><code>[&quot;2012-10-27&quot;, &quot;2012-10-28&quot;, &quot;2012-10-29&quot;, &quot;2012-10-30&quot;, &quot;2012-10-31&quot;, &quot;2012-11-01&quot;, &quot;2012-11-02&quot;, &quot;2012-11-03&quot;]</code></pre>
<p>Hope it helped you.<br />
Thank you.</p>
<p>$</p>
</body>
</html>
