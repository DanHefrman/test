<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>2019-04-22-jest-why-we-stopped-snapshot-tests</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p>&lt;!DOCTYPE html&gt;</p>
<p>When jest introduced snapshot tests we were very eager to try out. we were using snapshot for most of the components and soon enough we have to make a decision that we no longer do snapshot tests.</p>
<p><img src="https://s3.ap-south-1.amazonaws.com/revathskumar-blog-images/2019/jest-snapshot/john-matychuk-590843-unsplash.jpg" />{: width=“100%”}</p>
<p>The main reason for such a decision was</p>
<h2 id="test-failure-due-to-external-dependencies."><a href="#external-dependencies" id="external-dependencies" class="anchor"><em></em></a>1. Test failure due to external dependencies.</h2>
<p>Our tests started failing due to changes in external dependencies. The external ui component updated the <code>css class</code> naming convention and all our component snapshot started failing, then we have to update all failing snapshots and in another release the same library rollback the changes/made some new changes (don ’t remember exactly what was the it) and again the snapshots started failing.</p>
<p>This made it very difficult to maintain the snapshot tests.</p>
<h2 id="devs-update-the-snapshot-without-verify"><a href="#devs" id="devs" class="anchor"><em></em></a>2. Devs update the snapshot without verify</h2>
<p>Since <code>jest</code> gave very easy option to update the snapshot using <code>-u</code> option, devs started using it regularly and keep updating the snapshort without verifing whether the changes are relevent or by mistake.</p>
<p>This become increasingly difficult to do the code review.</p>
<h2 id="extra-effort-to-mock-current-datetime"><a href="#current-date-time" id="current-date-time" class="anchor"><em></em></a>3. Extra effort to mock current date/time</h2>
<p>We required to put extra effort &amp; time to mock the methods which generate current date and time. The best part is this test will pass while we develop and test and start failing from next day only. by that time we might have already moved into new task.</p>
<p>Photo credit:</p>
<p>unsplash-logo</p>
<p><span style="display:inline-block;padding:2px 3px">John Matychuk</span></p>
</body>
</html>
