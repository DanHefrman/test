<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>08-using-yeoman-with-php</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p>This is a simple workaround to use yeoman with PHP projects. For this I assume that you have a basic knowledge of yeoman and already setup yeoman, grunt, node, bower and php.</p>
<p>For this tutorial I used</p>
<ul>
<li>Yeoman 1.0.0-beta.3</li>
<li>Ubuntu 11.04</li>
<li>php-cgi 5.3.5-1</li>
</ul>
<h3 id="initiate-yeoman-webapp">Initiate yeoman webapp</h3>
<p>For this tutorial I started with initialize a new project with yeoman webapp generator, which is shipped along with yeoman.</p>
<p>To start with a fresh project, create a directory named yeoman-php and cd into it. Now boilerplate the webapp with yeoman. After that install the npm packages and bower components. You can check whether everything works fine by running grunt.</p>
<blockquote>
<p>mkdir yeoman-php &amp; cd yeoman-php<br />
yo webapp<br />
npm install<br />
bower install<br />
grunt server</p>
</blockquote>
<p>Ok! Now we need to customize the project in order to execute php file.</p>
<h3 id="installing-php-cgi">Installing PHP-CGI</h3>
<p>In order to work this, You need to install php-cgi in your machine. If you are using ubuntu you can use the following command</p>
<blockquote>
<p>sudo apt-get install php5-cgi</p>
</blockquote>
<h3 id="execute-cgi-scripts">Execute CGI scripts </h3>
<p>To execute the php scripts we use <a href="https://github.com/fgnass/gateway">gateway</a> package as the connect middleware. Thanks to <a href="https://github.com/fgnass">fgnass</a> for creating the package. </p>
<p>You need to install this node package and add the same to your package.json file.</p>
<blockquote>
<p>npm install gateway –save-dev</p>
</blockquote>
<p> The above command will install the package and add the same into package.json (devDependencies).</p>
<h3 id="using-custom-middleware">Using custom middleware</h3>
<p>In order to use the custom middleware we need to update the Gruntfile. Add the below code to top of your Gruntfile.js.</p>
<pre><code>var gateway = require(&#39;gateway&#39;);
var phpGateway = function (dir){
    return gateway(require(&#39;path&#39;).resolve(dir), {
        &#39;.php&#39;: &#39;php-cgi&#39;
    });
};  </code></pre>
<p>Now add the following to the livereload, middleware settings in connect. Make sure you add on top of both mountFolder already exists.</p>
<blockquote>
<p>phpGateway(‘app’)</p>
</blockquote>
<p>Now add the <strong>.php</strong> extenstion to livereload files, so that change in grunt will reload the php files everytime you change anything.</p>
<blockquote>
<p>‘&lt;%= yeoman.app %&gt;/*.php’ </p>
</blockquote>
<p>Now rename the index.html to index.php and try executing <strong>grunt server</strong>.</p>
<p>You can look into the github <a href="https://github.com/revathskumar/yeoman-php/commit/7a9338d26e1cd722668ec9dcbe0bf5320cd103a3">commit</a> for the whole set of changes required for this.<br />
A demo project is available on <a href="https://github.com/revathskumar/yeoman-php">github</a>.</p>
<p><strong>Currently I updated only for connect/livereload tasks.<br />
I am working on updating it for build, usemin and other tasks. </strong></p>
<p>Looking forward for your comments.<br />
Thanks.</p>
<p>$</p>
</body>
</html>
